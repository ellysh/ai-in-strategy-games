## Основные понятия

### Термины

Рассмотрим основные концепции теории игр. Они помогут нам проанализировать стратегические игры. Так мы поймём, как играют в них люди и как это делает ИИ.

Начнём с термина [**игра**](https://ru.wikipedia.org/wiki/Игра). В общем смысле он означает способ получения и развития навыков у животных и людей. Такая игра не ставит своей целью удовлетворение физиологических потребностей. Обычно её цель — это развлечение.

Джон фон Нейман даёт следующее определение:

*Игра представляет собой попросту совокуп­ность описывающих ее правил.*

Современная теория игр уточняет это определение. Она вводит понятие **стратегической игры**. От обычной игры она отличается тремя особенностями:

1. Участников должно быть минимум двое.

2. Действия каждого участника влияют на результаты других и наоборот.

3. Все участники знают, что их действия влияют на других. Поэтому они учитывают это влияние во время планирования.

Теория игр рассматривает только стратегические игры. Почему? Это следует из задач, которые теория перед собой ставит. Её главная задача — объяснить различные события и их причины.

Многие типы социального взаимодействия и конфликты можно свести к упрощенной модели. Например, это относится к спорту, войне, рыночным отношениям. Модель в большинстве случаев представляет собой абстрактную стратегическую игру. При этом в ней учитываются самые важные аспекты исходного взаимодействия.

Абстрактную стратегическую игру можно изучить с помощью математического аппарата теории игр. В результате можно получить некоторое решение. Если модель и математические выкладки были верны, решение будет применимо к изначальной ситуации. Кроме того её объяснит анализ модели.

Модель помогает не только объяснить социальное взаимодействие, но и спрогнозировать его развитие. Таким образом у участников появляется возможность лучше спланировать свои действия, чтобы достичь наилучших результатов.

Следует отличать игру и отдельную **партию** этой игры. Каждый случай разыгрывания игры определённым способом от начала и до конца представляет собой партию.

В игре её участники должны делать **ходы**. Ход представляет собой возможность выбора между несколькими вариантами действий. Ход — это компонент игры. Когда участник совершает определённое действие в конкретной ситуации, это называется **выбором**. Игра состоит из последовательности ходов, а партия — из последовательности выборов.

I> В современной литературе по теории игр понятия игра-партия и ход-выбор редко различают.

Каждый участник игры следует какой-то **стратегии**. Термин стратегия означает подробный план действий. Этот план включает все возможные события и ответные действия на них. В случае сложной и важной игры стратегия может быть записана формально в виде документа. Пример такого документа — контракт между работником и работодателем. В простых играх, участники могут составлять стратегию на ходу.

Если свести социальное взаимодействие к абстрактной игре, возникает вопрос о целях её участников. Каждый участник стремится получить выгоду. Теория игр использует математический аппарат. Чтобы его применить для оценки выгоды, её надо представить в численной форме. Такое представление называется **выигрышем**.

В некоторых играх выигрыш можно легко представить в численной форме. Это может быть денежная прибыль или количество заработанных баллов. В других играх выигрыш имеет субъективный характер. Например, когда один участник убеждает остальных в правильности своей точки зрения.

Для каждого возможного исхода игры можно указать выгоду, которую получит участник. Это число называется выигрышем участника для данного исхода.

Каждый участник игры стремится получить максимальный выигрыш. Для этого он подбирает лучшую стратегию и придерживается её в ходе игры. Такое поведение игрока называется **рациональным**. Теория игр исходит из предположения, что все участники игры рациональны. Это значит, что они понимают собственные интересы и правильно рассчитывают свои действия для их достижения.

Когда в игре участвуют только рациональные игроки она приходит к состоянию **равновесия**. Этот термин означает ситуацию, когда каждый участник выбирает лучшую из возможных стратегий. Такая стратегия обеспечивает ему максимальный выигрыш. Понятие равновесия позволяет найти **решение игры**. Решением называется набор оптимальных стратегий для участников.

Состояние равновесия устойчиво. Это происходит потому, что когда один участник следует своей оптимальной стратегии, другому не выгодно отступать от своей. Это не означает, что игра не продвигается. Каждый игрок делает ход, согласно своей стратегии. Но при этом сами стратегии не меняются по ходу игры. В противном случае, один из участников получит преимущество.

### Классификация игр

Социальные взаимодействия, которые сводятся к стратегическим играм, могут существенно различаться. Поэтому теория игр выделяет несколько признаков для описания каждой конкретной игры. Такая классификация упрощает задачу моделирования исходного взаимодействия. Рассмотрев его ключевые признаки, можно быстро прийти к соответствующей ему игре.

Большинство сложных игр нельзя однозначно отнести к тому или другому типу. Часто они представляют собой нечто среднее между двумя крайностями. Тем не менее необходимо знать, какие чистые типы игр существуют.

Таблица 1-1 демонстрирует признаки классификации и типы игр.

{caption: "Таблица 1-1. Классификация стратегических игр", width: "100%"}
| Признак | Типы |
| --- | --- |
| Порядок ходов | [**Последовательный**]((https://ru.wikipedia.org/wiki/Последовательная_игра)) |
|  | [**Параллельный**](https://ru.wikipedia.org/wiki/Одновременная_игра) |
|  | |
| Разделение выигрыша | [**Игра с нулевой суммой**](https://ru.wikipedia.org/wiki/Антагонистическая_игра) |
|  | [**Игра с ненулевой суммой**](https://lopatnikov.pro/slovar/i/igry-s-nenulevoj-summoj/) |
|  | |
| Информированность участников друг о друге | [**Полная информация**](https://ru.wikipedia.org/wiki/Игра_с_полной_информацией) |
|  | [**Неполная информация**](https://ru.wikipedia.org/wiki/Игра_с_неполной_информацией) |
|  | |
| Информированность участников об игровых событиях | [**Совершенная информация**](https://ru.wikipedia.org/wiki/Игра_с_совершенной_информацией) |
|  | **Несовершенная информация** |
|  | |
| Элемент случайности | **Детерминированная игра** |
|  | **Недетерминированная игра** |
|  | |
| Повторяемость | **Однократная игра** |
|  | **Многократная игра** |
|  | |
| Количество ходов | **Одноходовая игра** |
|  | **Многоходовая (позиционная) игра** |
|  | |
| Правила игры | **Фиксированные** |
|  | **Можно манипулировать** |
|  | |
| Взаимодействие участников | [**Кооперативная игра**](https://ru.wikipedia.org/wiki/Кооперативная_теория_игр) |
|  | [**Некооперативная игра**](https://ru.wikipedia.org/wiki/Некооперативная_теория_игр) |
|  | |
| Допустимые ходы участников | [**Беспристрастная игра**](https://ru.wikipedia.org/wiki/Беспристрастная_игра) |
|  | **Пристрастная игра** |
|  | |
| Количество возможных стратегий | **Дискретная игра** |
|  | **Непрерывная игра** |

Общепринятой классификации в теории игр ещё нет. В русскоязычной и англоязычной литературе приводятся разные признаки классификации. Кроме того несколько авторитетных специалистов по экономике и теории игр предлагают свои подходы к этой задаче.

В этой книге предлагается классификация [Авинаша Диксита](https://ru.wikipedia.org/wiki/Диксит,_Авинаш) с небольшими дополнениями.

#### Порядок ходов

Начнём с порядка, в котором участники игры делают свои ходы. Во многих настольных играх участники ходят по порядку друг за другом. Например, это правило выполняется в шашках и шахматах. Игры с таким порядком ходов называются **последовательными**.

Если игроки делают свой ход одновременно или не знают о предыдущем ходе соперника, игра называется **параллельной**. Такой порядок ходов выполняется в игре "камень-ножницы-бумага". В ней участники выбирают действие одновременно. Другой пример параллельной игры — дилемма заключённых. В ней участники могут действовать друг за другом. Однако на момент выполнения хода каждый игрок не знает о выборе другого.

#### Разделение выигрыша

Игры могут отличаться способом распределения выигрыша между участниками. Для примера рассмотрим спортивное соревнование — бег на сто метров. В нём побеждает только один участник. Все остальные считаются проигравшими. Игры с таким распределением выигрыша называются **антагонистическими** или [**с нулевой суммой**](https://dic.academic.ru/dic.nsf/politology/3695/ИГРА).

Что означает термин "нулевая сумма"? Теория игр начиналась как математическое направление для анализа экономического взаимодействия. Поэтому для оценки исходов игры было введено понятие **суммы выигрышей всех участников**. Эта сумма естественным образом выводится из прибыли. Рассмотрим пример. Предположим, что несколько родственников делят между собой фамильные ценности. При этом сумма выигрышей всех участников одна. Она не зависит от исхода игры. При любом варианте разделения ценностей, их количество неизменно. Такое распределение выигрышей характерно для **игры с постоянной суммой**.

Для игр одного типа сумма выигрышей остаётся постоянной для всех исходов. Для игр другого типа, эта сумма отличается в зависимости от исхода. Например, в дилемме заключенных есть исход, когда оба участника получают минимальное наказание. При другом исходе наказание максимальное. В этом случае говорят об **игре с ненулевой суммой**.

В игре с постоянной суммой выигрыши можно сместить по числовой шкале. Это смещение удобно выбрать так, чтобы сумма выигрышей всех участников равнялась нулю. Рассмотрим пример. Допустим, что в игре два участника. Их сумма выигрышей равна X. Если победитель забирает всё, то его выигрыш составит X. В этом случае проигравший получит 0. Сместим оба выигрыша на X/2 влево по числовой оси. Тогда победитель получит X/2, а проигравший -X/2. В сумме эти числа дают ноль. В этом случае говорят об **игре с нулевой суммой**.

На практике игры с постоянной и нулевой суммой не отличаются. Это происходит потому, что отношение между выигрышами участников не меняется при добавлении к ним одного и того же числа.

#### Информированность участников друг о друге

В любой игре участники владеют некоторой информацией. Теория игр разделяет её на две основные категории:

* Информация о самих участниках.
* Информация об игровых событиях и ходах участников.

К первой категории информации относится следующее:

* Стратегии игроков.
* Выигрыши участников при всех возможных исходах игры.
* Функции полезности участников.

Термин **функция полезности** есть в [экономике](https://ru.wikipedia.org/wiki/Функция_полезности) и [теории игр](https://ru.wikipedia.org/wiki/Нормальная_форма_игры#Функция_полезности). Сначала уточним значение термина [**функция**](https://ru.wikipedia.org/wiki/Функция_(математика)). В математике функцией называется правило, по которому элементы одного множества значений соответствуют элементам другого множества.

Функция полезности в экономике определяет предпочтения потребителя на множестве доступных ему благ. В теории игр эта функция определяет предпочтения участника в отношении исходов игры.

В **игре с полной информацией** участники имеют всю информацию друг о друге. Кроме того эта информация является **общим знанием**.

Термин общее знание имеет особое значение в теории игр. Для его объяснения рассмотрим пример. Предположим, что какой-то факт X является общим знанием для игроков A и B. Тогда справедливо следующее:

* A и B знают о факте X.
* A знает, что B знает о факте X. B знает, что A знает о факте X.
* B знает, что A знает о его осведомлённости о факте X. То же самое справедливо для A.
* т.д.

Цепочка "A знает, что B знает" продолжается до бесконечности.

Концепцию общего знания лучшего всего демонстрирует классическая [задача о чумазых детях](https://ru.wikipedia.org/wiki/Задача_о_чумазых_детях). Её формулировка выглядит так:

*Группа детей играла на улице. Некоторые из них испачкали лицо. Ни один ребёнок не может определить состояние своего лица. При этом каждый из них знает состояние лиц у всех остальных. Воспитатель говорит: "по крайней мере у одного из вас грязное лицо". После этого воспитатель начинает считать. После каждого счёта ребёнок, который понял что он испачкался, должен выйти вперёд.*

Если испачкались N детей, они точно узнают об этом на N-ом счёте. Задача решается методом [**индукции**](https://ru.wikipedia.org/wiki/Математическая_индукция). Согласно этому методу, сначала надо рассмотреть случая для единственного испачканного ребёнка. Затем доказывается, что найденное решение справедливо случаев N и N+1 испачканных детей.

Рассмотрим случай, когда испачкался только один ребёнок, то есть N = 1. В этом случае после сообщения воспитателя, ребёнок видит, что все остальные дети чистые. Это означает, что испачкался именно он. Тогда ребёнок делает шаг вперёд.

Предположим, что испачкались двоё детей: Алиса и Боб. Это случай N = 2. Тогда после сообщения воспитателя рассуждения Алисы выглядят так:

* Алиса видит, что среди детей есть один испачканный Боб. Из этого следует, что либо Боб единственный испачканный ребёнок, либо она тоже испачкалась.

* Алиса не делает шаг вперёд, потому что ожидает шаг от Боба. Если Боб не делает шаг на первый счёт, это значит, что он видит ещё одного испачканного ребёнка.

* Алиса не видит испачканных детей кроме Боба. Это значит, что Боб видит, что испачкалась Алиса.

* На второй счёт Алиса делает шаг вперёд.

Рассуждения Боба выглядят точно так же. Поэтому на второй счёт он тоже делает шаг вперёд.

Если испачканных детей трое N = 3, они поймут состояние своего лица на третий счёт. Почему это происходит? Допустим, что третий испачканный ребёнок — Ева. Она видит только двух испачканных детей. Ева ожидает, что они будут рассуждать так, как описано выше для случая N = 2. Если на второй счёт оба испачканных ребёнка не сделали шаг вперёд, это значит, что они видят третьего испачканного. Ева видит, что все дети чистые кроме Алисы и Боба. Это значит, что испачкалась она сама.

Продолжая такие рассуждения, можно доказать, что все N испачканных детей сделают шаг вперёд на N-ом счёте. Дети смогут понять состояние своего лица благодаря общему знанию. Оно появилось, благодаря информации от воспитателя.

Исход игры может отличаться если информация об участниках известна всем, но не является общим знанием. Такая информация называется [**взаимным знанием**](https://ru.wikipedia.org/wiki/Взаимное_знание). Рассмотрим пример. Предположим, что факт X известен игрокам A и B. Но A не знает, что B знает о факте X. В этом случае A может строить свою стратегию исходя из предположения, что B не знает об X. Тогда B получит преимущество. Это преимущество заключается в том, что стратегия игрока A основана на ложном предположении. Наш пример демонстрирует [**игру с неполной информацией**](https://ru.wikipedia.org/wiki/Игра_с_неполной_информацией).

В **игре с неполной информацией** участники не знают всего друг о друге, либо эта информация не является общим знанием.

#### Информированность участников об игровых событиях

Вторая категория информации — это знание предыдущих игровых событий и ходов игроков. Участники **игр с совершенной информацией** владеют этим знанием. Это значит, что на момент своего хода каждый игрок осведомлён обо всех аспектах игры. Например, это может быть состояние фигур на игровой доске в шахматах или шашках.

В **играх с несовершенной информацией** некоторые аспекты происходящего скрыты от участников. Например, к этой категории относится большинство карточных игр. В них игроки не знают, какие карты получил каждый из них. Поэтому участники вынужден строить свою стратегию на предположениях. Если предположения оказываются неверны, то стратегия приводит к неблагоприятному исходу.

Участники игр с несовершенной информацией действуют в условиях [**неопределённости**](https://ru.wikipedia.org/wiki/Неопределённость). Неопределённость означает отсутствие или недостаток информации.

Теория игра различает два типа неопределённости:

* Стратегическая
* Внешняя

**Стратегическая неопределённость** — это недостаток информации у одного из участников о прошлых или происходящих игровых событиях, в том числе о действиях других игроков.

В играх с несовершенной информацией стратегическая неопределённость есть, а в играх с совершенной информацией её нет. В этом и состоит различие этих типов игр.

#### Элемент случайности

В большинстве азартных игр есть элемент случайности. Например, в игре [кости](https://ru.wikipedia.org/wiki/Кости_(игра)) участники бросают игральные кубики. При каждом броске получается случайное количество очков. Выигрывает тот, кто набрал больше очков за бросок.

Случайные события приводят к неопределённости в игре. Из-за неё участники не могут однозначно просчитать все возможные ходы и предсказать исход. Неопределённость такого типа называется **внешней**. К ней относятся все независящие от игроков события, которые влияют на исход игры.

Игра в которой есть внешняя неопределённость называется **недетерминированной**. Например, в такой игре может случайно определяться выигрыш участников, очерёдность и возможность их ходов, момент последнего хода.

#### Повторяемость и количество ходов

Игра может проводиться только один раз, либо много раз с разными участниками. Такие игры называются **однократными**. В них участники могут применять агрессивные стратегии, не опасаясь ответных действий в последующих партиях. Например, это может быть попытка блефа или обмана оппонентов.

В однократных играх участники как правило владеют неполной информацией. У них нет возможности узнать друг друга по предыдущим играм.

Если игра проводится несколько раз с одним и тем же составом участников, она называется **многократной**. В каждой следующей партии участники учитывают прошлые действия друг друга. Из-за этого агрессивная стратегия, сработавшая в первый раз, может провалиться на второй попытке. Если оппоненты её ожидают, они подготовятся к такой стратегии.

В многократных играх участники лучше знают друг друга. Поэтому часто это игры с полной информацией.

Игра, в которой каждый участник может сделать один ход, называется **одноходовой**. В этом случае стратегия каждого игрока сводится к однократному действию. Вариантов такого действия может быть несколько. Пример — игра в кости. Каждый игрок делает по одному броску кубиков. Результаты бросков всех игроков определяют победителя.

Если игра состоит из последовательных ходов, она называется **многоходовой** или **позиционной**. Участники могут совершать ходы друг за другом по порядку или одновременно. Пример такой игры — крестики нолики. Участники делают свои ходы, пока один из них не побеждает или не наступает ничья.

В многоходовых играх стратегия участников содержит подробный план действий. Он описывает возможные ходы оппонентов и игровые события, а также ответные действия на них.

#### Правила игры

В настольных играх и спортивных соревнованиях правила строго определены. В случае их нарушения участник либо получает штраф, либо исключается из игры.

В социальных взаимодействиях, которые моделируются с помощью игр, правила напротив нестрогие. Участники сами определяют порядок своего взаимодействия и то, какие действия в нём допустимы. Эти правила формируются под влиянием воспитания, законов, общепризнанных ценностей.

Когда правила в игре не фиксированы, участники склонны манипулировать ими. Обычно это происходит до начала игры. Каждый участник стремится изменить правила так, чтобы увеличить свой выигрыш. Из-за этих манипуляций игра делится на два этапа. На первом этапе игроки предпринимают действия, чтобы повлиять на правила. На втором этапе начинается сама игра по этим правилам.

Действие, которое позволяет изменить правила игры, называется **стратегическим ходом**. Стратегические ходы бывают трех типов:

* Обязательство
* Угроза
* Обещание

**Обязательство** — это заявление одного из участников о том, какой ход он намерен сделать независимо от действий других игроков. Обязательство является **безусловным** стратегическим ходом. Это значит, что на него не могут повлиять действия оппонентов.

По сути обязательство приводит к изменению порядка ходов в игре. Если участник А дал обязательство сделать X, он уже тем самым сделал свой ход. Теперь участник Б должен отвечать на этот ход своим действием, когда игра начнётся.

Следующие два стратегических хода являются **условными**. Когда участник А делает такой ход, он заявляет: "если вы сделаете X, я сделаю Y". Такое заявление имеет смысл, если участник А ходит не первым. Своим заявлением он влияет на решения тех, кто будет делать ход до него.

Условные стратегические ходы могут иметь две цели:

* Сдерживание
* Принуждение

**Сдерживанием** называется попытка одного игрока помешать другому что-то сделать. Другими словами участник А удерживает участника Б от выполнения какого-то действия.

**Принуждение** — это попытка одного игрока склонить другого к какому-то действию. То есть участник А принуждает участника Б сделать что-то.

Когда игрок А заявляет, что причинит игроку Б вред при совершении им определённого действия, это называется **угрозой**. Когда игрок А заявляет, что даст игроку Б вознаграждение при совершении им определённого действия, это называется **обещание**.

И угроза, и обещание могут использоваться для обоих целей сдерживания и принуждения.

Чтобы стратегические ходы игрока достигли цели, он должен обеспечит их **достоверность**. Рассмотрим пример. Участник А обещал вознаграждение участнику Б за какое-то действие. Допустим, что игрок Б знает: А выгодно отказаться от своего заявления, когда игра начнётся. В этом случае, заявление игрока А никак не повлияет на ход игры. Для Б нет смысла совершать желаемое А действие, поскольку обещанного вознаграждения не будет.

Чтобы обещание стало достоверным, его выполнение должно приносить выгоду не только для участника Б, но и для А, который его дал.

Проблема достоверности актуальна и для угрозы. Если игроку А выгодно выполнить свою угрозу независимо от действий Б, то Б нет смысла подчиняться. Только если выполнение угрозы нанесёт вред самому участнику А, Б может поверить в её достоверность. Это гарантирует, что А не выполнит угрозу безусловно.

Как обеспечить достоверность условного стратегического хода в общем случае? Для этого обещанное игроком действие должно приносить ему выгоду или наносить вред одновременно с игроком, которому это обещание даётся. Другими словами выполнение угрозы приносит взаимный вред, а выполнение обещания — взаимную выгоду.

#### Взаимодействия участников

В большинстве игр, к которым сводятся социальные взаимодействия, интересы участников частично конфликтуют и частично совпадают. Такое смешение интересов способствует тому, чтобы игроки договорились о своих действиях. В этом случае каждый смог бы получить максимальный выигрыш.

Проблема договорённостей в том, что не всегда возможно отследить их выполнение. Договорённость заключается на одном этапе игры, а действия участников происходят на другом. Если действия происходят параллельно, они станут известны игрокам уже после совершения.

Предположим, что нарушение договорённости даст игроку выигрыш. В этом случае он склонен нарушить договорённость. Если такая ситуация справедлива для каждого участника, договорённость не имеет силы. Каждый заинтересован в её нарушении.

Игра, в которой нет внешних стимулов для выполнения договорённостей, называется **некооперативной**. Таким внешним стимулом, например, может быть контракт, закон, третья сторона, стратегические ходы.

Участники некооперативных игр могут сотрудничать. Но такое сотрудничество должно быть взаимовыгодным. Только в этом случае договорённость будет иметь силу.

В **кооперативной игре** участники действуют согласованно в группах. При этом есть внешнее принуждение к такому согласованному поведению.

#### Допустимые ходы участников

В некоторых играх участники могут делать одинаковые ходы. Например, в ним каждый из них может брать произвольное количество предметов из каждой кучки. Строго говоря, оба участника могут следовать одной и той же стратегии. Такие игры называются **беспристрастными**.

В **пристрастной игре** каждый игрок имеет свой набор возможных ходов. Например, в шашках игрок может двигать только фигуры своего цвета.

#### Количество возможных стратегий

В **дискретной игре** у каждого участника есть конечное число [**чистых стратегий**](https://ru.wikipedia.org/wiki/Стратегия_(теория_игр)#Типы_стратегий). Чистой называется стратегия, которая однозначно определяет действия игрока во всех возможных игровых ситуациях. Когда игрок выбирает одну из нескольких чистых стратегий случайным образом, это называется **смешанной стратегией**. Выбранная стратегия не меняется до окончания игры.

К дискретным играм относятся настольные игры и спортивные соревнования. Например, шахматы, шашки, покер, футбол. В них у каждого участника конечное число стратегий. Это число может быть очень большим, как например в шахматах, но оно конечно.

В **непрерывной игре** у участников есть бесконечное число чистых стратегий. В частном случае стратегия может быть некоторым числом, выбранным из непрерывного диапазона. 

Пример дискретной игры — назначение цены на аналогичный товар двумя конкурирующими производителями. Цена назначается с точностью до копейки. Поэтому диапазон возможных цен очень большой. В таком случае предполагается, что цена — это непрерывное значение. Стратегия каждого игрока соответствует назначенной им цене. В нашем примере каждый игрок имеет **непрерывную стратегию**.
