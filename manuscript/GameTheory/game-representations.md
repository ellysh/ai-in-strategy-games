## 1.3 Представление игр

Теория игр предлагает несколько подходов для решения игры. Чтобы применить любой из них, игру надо представить в стандартной форме. Чаще всего применяются следующие три формы:

1. [**Развёрнутая форма**](https://ru.wikipedia.org/wiki/Развёрнутая_форма_игры) (экстенсивная или дерево игры).

2. [**Нормальная форма**](https://ru.wikipedia.org/wiki/Нормальная_форма_игры) (стратегическая или платёжная матрица).

3. **Форма характеристической функции**.

I> Намного реже применяются: [**краткая форма**](https://en.wikipedia.org/wiki/Succinct_game), [**сеть Петри**](https://ru.wikipedia.org/wiki/Сеть_Петри), [**графическая форма**](https://en.wikipedia.org/wiki/Graphical_game_theory) и [другие](https://en.wikipedia.org/wiki/Game_theory#Alternative_game_representations).

Выбор формы представления зависит от типа игры. Это вопрос наглядности и удобства вычислений. Таблица 1-2 приводит соответствие типов игр и форм представления.

{caption: "Таблица 1-2. Формы представления игр", width: "100%"}
| Тип игры | Форма представления |
| --- | --- |
| С последовательными ходами | Развёрнутая форма |
|  | |
| С параллельными ходами | Нормальная форма |
|  | |
| Кооперативная | Характеристическая функция |

Эта таблица не означает, что последовательные игры нельзя представить в нормальной форме, а параллельные — в развёрнутой. Такое представление возможно, но оно будет менее наглядным.

В зависимости от количества возможных стратегий выигрыши участников представляются в разной форме. Их демонстрирует таблица 1-3.

{caption: "Таблица 1-3. Представление выигрышей участников", width: "100%"}
| Тип игры | Представление выигрышей |
| --- | --- |
| Дискретная | Платёжная матрица |
|  | |
| Непрерывная | График наилучших ответов |

В этой книге мы рассмотрим развёрнутую и нормальную формы представления игр. С остальными формами вы можете познакомиться в учебнике по теории игр.

### 1.3.1 Развёрнутая форма игры

#### 1.3.1.1 Игра "дарообмен"

Рассмотрим классическую игру ["дарообмен"](https://ru.wikipedia.org/wiki/Дарообмен). Её описали американские экономисты Джордж Акерлоф и Дэнет Йеллен в статье "Гипотеза справедливой заработной платы и безработицы". Статья была опубликована в 1990 году.

Игра "дарообмен" моделирует рынок труда. В ней два участника: Работодатель и Работник. Первый ход делает Работодатель. Он предлагает Работнику оплату за выполнение некоторой работы. Второй ход Работника. Он принимает зарплату и выбирает уровень усилий, который потратит на выполнение работы. Работник не может отказаться от предложенной ему оплаты и вообще не делать работу.

Рассмотрим дискретный вариант игры, в котором у Работодателя есть только две стратегии:

1. Предложить высокую зарплату.
2. Предложить низкую зарплату.

В этом варианте игры у Работника тоже есть только две стратегии:

1. Принять зарплату и ответить высоким уровнем усилий при выполнении работы.
2. Принять зарплату и ответить низким уровнем усилий.

Представим игру в развёрнутой форме. Для этого построим **дерево игры**. Оно отражает связь всех возможных действий участников и исходов игры, к которым они приводят.

Дерево игры начинается в крайней левой точке, если оно ориентировано горизонтально. Если дерево ориентировано вертикально, то его начало — крайняя верхняя точка. Эта точка называется **начальным узлом** или корнем. В этом узле делает ход первый участник.

Из начального узла дерева исходят отрезки. Каждый из них соответствует варианту хода первого участника. Эти отрезки называются **ветвями**.

Каждая ветвь соединяет два узла дерева. Узлы бывают двух типов:

* **Узел действия** — в нём какой-то участник делает ход.
* **Концевой узел** — обозначает конкретный исход игры.

В концевом узле игра заканчивается и ни один из участников уже не может сделать ход.

Иллюстрация 1-1 демонстрирует дерево игры "дарообмен".

{caption: "Иллюстрация 1-1. Дерево игры дарообмен", height: "40%"}
![Дерево игры дарообмен](images/GameTheory/gift-exchange-game-tree.png)

На иллюстрации вы видите семь точек: a, b, c, d, e, f, g. Первые три a, b, c — это узлы действия. В них участники делают ходы. Исходящие из этих узлов ветви соответствуют возможным ходам игроков. Последние четыре точки d, e, f, g — это концевые узлы. Они соответствуют возможным исходам игры.

Игра начинается в точке a. В ней Работодатель предлагает уровень зарплаты. Если уровень высокий, Работник делает свой ход в узле b. Он выбирает уровень своих усилий для выполнения работы. Если Работодатель предложил низкую зарплату, Работник выбирает уровень усилий в узле c.

Ход Работника в узле b или c определит исход игры. Всего возможно четыре исхода. Каждому из них соответствует концевой узел: d, e, f или g.

В каждом возможном исходе игры участники получают разный выигрыш. На иллюстрации 1-1 выигрыши обозначаются парой цифр. Первая синяя цифра — это выигрыш Работодателя. Вторая красная цифра — выигрыш Работника.

Рассмотрим выигрыши участников. Наилучший исход для обоих — узел d. Это случай, когда Работодатель предложил высокую зарплату и Работник качественно выполнил работу. Каждый получает то, что хотел. Поэтому выигрыши обоих участников равны 2.

В концевом узле e Работодатель не получает желаемого. Он заплатил большую сумму, но Работник отработал небрежно. Выигрыш Работодателя при таком исходе минимальный — 0. С другой стороны, Работник получил большие деньги и потратил минимум усилий. Поэтому его выигрыш максимальный — 3.

В концевом узле f Работник не получает желаемого. Он выполнил заказ качественно, но получил за него мало. Выигрыш Работника при таком исходе минимальный — 0. Работодатель наоборот получил хороший результат за небольшие деньги. Его выигрыш максимальный — 3.

Исход игры в узле g соответствует случаю, когда Работодатель заплатил небольшую сумму и Работник сделал заказ небрежно. В результате Работодатель не потратил много денег, а Работник сэкономил свои силы. Оба участника получают низкие выигрыши по 1.

Найдём решение игры. Для этого учтём два момента. Во-первых, теория игр предполагает, что все участники взаимодействия — это рациональные агенты. Следовательно, их главная цель заключается в максимизации своего выигрыша.

Во-вторых, упростим ситуацию. Допустим, что сделка между Работодателем и Работником происходит однократно. Это значит, что второй попытки договориться у них не будет. В этом случае Работнику нет смысла показать себя с хорошей стороны.

Для анализа применим метод [**обратной индукции**](https://ru.wikipedia.org/wiki/Обратная_индукция). Он также известен как метод **обратных рассуждений**. Его впервые применили фон Нейман и Моргенштерн для анализа игр с нулевой суммой в книге "Теория игр и экономическое поведение".

Обратная индукция предлагает рассматривать ходы игроков в обратном порядке, начиная с последнего. Таким образом мы находим наилучший выбор участника, который ходит последним. Затем с учётом этого, ищем наилучший предпоследний ход. Так мы продолжаем идти по дереву игры назад до тех пор, пока не достигнем начального узла.

Какой наилучший выбор у Работника? Он делает свой последний ход либо в узле b, либо в — c. В первом случае Работодатель заплатил большую сумму. Тогда у Работника есть два варианта: выполнить работу хорошо или плохо. Первый выбор приведёт к исходу в узле d. Это неплохой результат, потому что и Работодатель и Работник получают выигрыш 2. Но исход в узле e лучше для Работника. В нём он получает выигрыш 3, потому что ему не пришлось сильно напрягаться. Значит, в узле b Работнику выгоднее выбрать вариант "мало усилий". Так он максимизирует свой выигрыш.

Теперь рассмотрим второй случай, когда Работодатель заплатил мало. Тогда Работник делает выбор в узле c. Если он решит работать добросовестно, это приведёт к исходу f. Тогда его выигрыш минимален. Работник получил мало, но потратил много усилий. Если же выбрать мало усилий, результат окажется лучше. Работник заработает мало, но сэкономит свои сил. Следовательно, лучший выбор для Работника в узле c — приложить мало усилий.

Наши рассуждения привели к тому, что Работнику всегда выгодно приложить мало усилий. Его решение никак не зависит от уровня зарплаты. Этот вывод справедлив для рационального агента, который стремится максимизировать свой выигрыш в однократной игре. Правила игры разрешают ему поступить нечестно в узле b и выбрать вариант "мало усилий". При этом у Работодателя нет никакой возможности наказать Работника за обман.

Теперь перейдём по дереву игры назад к начальному узлу a. В этом узле принимает решение Работодатель. Он тоже рациональный агент, который стремится максимизировать свой выигрыш. Поэтому он применит метод обратной индукции, чтобы спрогнозировать действия Работника. Так же как и мы Работодатель придёт к выводу: Работнику выгодно сделать заказ небрежно. В этом случае Работодателю нет никакого смысла платить много. Он всё равно получит некачественную работу, независимо от потраченной суммы. Тогда его лучший выбор — дать низкую зарплату.

Концевой узел g является решением игры "дарообмен". Он соответствует наилучшим стратегиям Работодателя и Работника. На иллюстрации 1-1 лучшие ходы для каждого игрока обозначены стрелками.

>>>

Если изменить условия игры, то изменится и её решение. Например, пусть игра проводится многократно. Тогда Работодатель может предложить высокую зарплату в первой партии. Если на это Работник ответит малыми усилиями, Работодатель накажет его в следующий партии. Вместо высокой зарплаты, он предложит низкую. Если Работник учтёт вероятное наказание, он будет заинтересован всегда отвечать высокими усилиями на высокую зарплату. Это обеспечит ему наибольший суммарный выигрыш узла d в серии партий.

Если Работодатель в первой партии предложил небольшую зарплату, у Работника есть стимул приложить много усилий. Таким образом он хорошо себя зарекомендует. Работодатель может учесть это в следующей партии и предложить высокую зарплату. Если этого не произойдёт, Работник перейдёт на выбор мало усилий в следующих партиях. Работодатель не заинтересован в таком исходе, поскольку он даст меньший выигрыш. Если Работник в какой-то партии перейдет на низкие усилия, Работодатель в следующей партии перейдет на низкую зарплату. Когда обе стороны учитывают такую перемену, ни одна из них не будет менять свою стратегию.

Исход в узле d можно получить и в однократной игре. Для этого Работодатель и Работник должны заключить контракт. Контракт, имеющий юридическую силу, позволит Работодателю через суд потребовать от Работника компенсации за плохо выполненную работу. Это опять же случай, когда Работодатель может "наказать" Работника. В этом случае выигрыши изменятся. В концевом узле e Работник получит не 3, а меньше в зависимости от суммы штрафа. Тогда ему станет невыгодно отвечать плохой работой на высокую зарплату.

#### 1.3.1.2 Игра "стоножка"

Рассмотрим более сложное дерево игры ["стоножка"](https://360wiki.ru/wiki/Centipede_game) или "Сороконожка". Эту игру разработал американский экономист Роберт Розенталь в 1981 году.

В игре "стоножка" участвуют два игрока. Они по очереди выбирают одно из двух действий: взять стопку монет на столе или передать ход. При передаче хода, стопка монет увеличивается. Если никто из участников не берёт стопку монет, игра заканчивается на десятом ходу. В этом случае никто не получает деньги.

Для примера назовём участников Алиса и Боб. Иллюстрация 1-2 демонстрирует дерево игры "стоножка".

{caption: "Иллюстрация 1-2. Дерево игры стоножка", width: "100%"}
![Дерево игры стоножка](images/GameTheory/centipede-game-tree.png)

Игра начинается с хода Алисы в узле a. Перед ней на столе лежит 10 монет. Алиса выбирает одно из действий: взять монеты или пропустить ход. Если Алиса берёт монеты, игра заканчивается в концевом узле b. Тогда выигрыш Алисы равен 10, а Боба — 0.

Если Алиса пропускает ход, число монет на столе удваивается. Теперь Боб в узле c делает ход. Он может взять 20 монет и получить выигрыш 20 в концевом узле d. Альтернативное решение — передать ход Алисе. Тогда она будет решать брать ли 30 монет в узле e.

Игра продолжается, пока на столе не накопится 100 монет. Последний ход делает Боб в узле x. Он выбирает или взять 100 монет, или пропустить ход. Если Боб пропускает ход, он и Алиса ничего не получают. Оба игрока знают, что игра заканчивается после хода Боба в узле x.

Применим метод обратной индукции, чтобы решить игру "стоножка". Начнём с последнего ход Боба в узле x. Очевидно, что его лучший выбор — взять 100 монет.

Перейдём к предпоследнему ходу Алисы. Она должна решить, брать ли ей 90 монет или пропустить ход. Алиса знает, что на последнем ходе в узле x Боб возьмёт монеты. Поэтому она должна сделать это раньше и взять 90 монет на предпоследнем ходе. Рассуждая аналогично, Боб решит взять 80 монет на предпредпоследнем ходе.

Продолжая это рассуждение до первого хода, мы приходим к выводу, что Алиса должна взять 10 монет в начальном узле a. В противном случае Боб возьмёт 20 монет на втором ходе.

"Стоножка" — один из случаев, когда экспериментальные данные не совпадают с решением теории игр. Игру неоднократно проводили среди студентов университетов. В этих экспериментах партия редко завершалась на первом ходе. Гораздо чаще участники пропускали несколько ходов и ждали увеличения суммы выигрыша. 

Есть несколько объяснений расхождению теории и практики. Одно из них указывает на неопытность игроков. Участник, который впервые начал играть в "стоножку", может просчитать только следующие пару ходов вперёд и остановиться на этом. Такой ограниченный расчёт приводит к тому, что участники склонны брать монеты ближе к последнему ходу.

Экономисты Игнасио Паласиос-Уэрта и Оскар Волий проводили игру "стоножка" среди профессиональных шахматистов в 2003 году. Результаты этого эксперимента оказались ближе к предсказанию теории. Большинство игроков предпочитало брать монеты на первом ходе. Возможно, причина в том, что шахматисты хорошо знакомы с методом обратной индукции ввиду своей профессии. Поэтому они просчитывали все ходы в игре перед тем, как сделать первый ход.

Другое объяснение говорит об ожидаемой иррациональности игроков. Когда первый участник пропускает ход в точке a, он даёт сигнал оппоненту, что готов повторить своё решение. Исходя из этого, второй игрок тоже пропускает свой ход в точке c. Таким образом игра продолжается, пока один из игроков не решит, что стопка монет стала достаточно большой.

Если у участников игры "стоножка" есть возможность договориться, её решение поменяется. В этом случае игра становится кооперативной. Оба участника ждут, пока сумма на столе не станет максимальной. Второй игрок забирает эту сумму на последнем ходе в точке x. Затем он делит выигрыш с первым игроком пополам.

### 1.3.2 Нормальная форма игры

#### 1.3.2.1 Игра "Дилемма заключённого"

В 1950 году американские математики Мерил Флад и Мелвин Дрешер сформулировали фундаментальную проблему теории игр. Она получила известность как ["дилемма заключённого"](https://ru.wikipedia.org/wiki/Дилемма_заключённого), благодаря канадскому математик Альберту Такеру.

Флад и Дрешер описали дилемму на языке математики. Такер сформулировал её в виде детективной истории. В таком виде проблема стала понятна нематематиков. Такер представил её на [семинаре для психологов](https://pr.princeton.edu/news/95/q1/0126tucker.html) в Принстонском университете. Так он продемонстрировал пример задачи, которые решает теория игр.

Вот как Такер сформулировал "дилемму заключённого":

> Два преступника А и Б были арестованы и заключены в тюрьму. Они находятся в разных камерах и не могут общаться друг с другом. У полиции нет достаточных доказательств, чтобы осудить преступников по основному делу. Есть только доказательства для менее серьезного обвинения. Полиция предлагает каждому заключённому либо дать показания против другого, либо не давать их. При этом результаты будут следующими:

> * Если А и Б дают показания против друг друга, каждый из них получит два года тюрьмы.

> * Если А даёт показания против Б, но Б хранит молчание, А будет освобождён, а Б получит три года тюрьмы.

> * Если А молчит, а Б даёт показания против него, А получает три года тюрьмы, а Б будет освобождён.

> * Если А и Б будут молчать, они оба получат по одному году тюрьмы.

Это параллельная игра с одновременными ходами. Участники могут делать выбор друг за другом, но при этом они не знают о выборе друг друга. Поэтому каждый из них вынужден принимать решения, не зная о решении другого.

Пусть участников "дилеммы заключённого" зовут Чак и Мэллори. Для начала представим игру в развёрнутой форме. Иллюстрация 1-3 демонстрирует это представление.

{caption: "Иллюстрация 1-3. Дерево игры дилемма заключённого", height: "40%"}
![Дерево игры дилемма заключённого](images/GameTheory/prisoners-dilemma-tree.png)

В параллельной игре участники делают ходы одновременно. Однако, структура дерева игры предполагает очерёдность ходов. Выберем любого из участников, который делает выбор в начальном узле a. Пусть это будет Чак.

Чак выбирает одно из двух действий: молчать или дать показания против Мэллори. После выбора Чака, наступает ход Мэллори в узлах b или c. Мэллори должен сделать свой ход, не зная в каком узле он находится. Эта нехватка информации возникает из-за стратегической неопределённости.

Чтобы отобразить стратегическую неопределённость на дереве игры, соединим узлы b и c пунктирной линией. Соединённые таким образом узлы называются **информационным множеством**. Игрок, делающий ход в одном из узлов информационного множества, не знает, что это за узел. Поэтому выбор игрока в пределах одного информационного множества означает один и тот же ход для всех узлов этого множества.

Итак Мэллори делает свой ход. Он должен выбрать одно из двух действий: молчать или дать показания против Чака. Это действие будет выполнено в обоих узлах b и c. Исход игры зависит от выбора Чака в узле a и выбора Мэллори в информационном множестве узлов b и c.

Применим метод обратной индукции, чтобы решить "дилемму заключённых". Начнём с последнего хода Мэллори в узлах b и c. Мэллори знает выигрыши при каждом возможном исходе игры. Если он выберет молчать, в лучшем случае он получит 1 год тюрьмы. Для этого Чак тоже должен молчать. Однако, Мэллори не знает, что на самом деле выбрал Чак. Если Чак дал показания, то выбор молчать означает для Мэллори 3 года тюрьмы.

Альтернативный выбор Мэллори — дать показания. Тогда если Чак промолчал, Мэллори может вообще избежать наказания. Если же Чак дал показания, то Мэллори получит 2 года тюрьмы. Этот вариант лучше чем 3 года. Получается, что дать показания — это лучший ответ Мэллори на любое действие Чака.

Перейдём в начальный узел a дерева игры. Чак применит метод обратной индукции и вычислит наилучший выбор Мэллори. Этот выбор — дать показания. Следовательно, Чак должен выбрать между молчать и получить 3 года тюрьмы или дать показания и получить 2 года. Его наилучший выбор — тоже дать показания.

Решением "дилеммы заключённых" будет концевой узел g с выигрышами участников -2 и -2.

Деревья игр "дилемма заключённого" и "дарообмен" похожи. Если вы добавите число 3 ко всем выигрышам на иллюстрации 1-3, вы получите выигрыши, как на иллюстрации 1-1. Мы применили метод обратной индукции к обоим играм и получили одинаковое решение. Это означает, что "дарообмен" представляет собой последовательную версию игры "дилемма заключённого".

В случае игр "дилемма заключённого" и "дарообмен" решение не поменялось при смене типа игры с последовательного на параллельный. Однако, так происходит не всегда. В некоторых случаях в последовательной версии игры преимущество получает участник, делающий первый ход. В других случаях преимущество у игрока на втором ходе.

Теперь представим игру "дилемма заключённого" в нормальной форме. Для этого построим таблицу. Её строки соответствуют стратегиям Чака, а столбцы — стратегиям Мэллори. В каждой ячейки таблицы указываются выигрыши обоих участников, если они выберут стратегии из соответствующих строки и столбца. Первое число в каждой ячейке означает выигрыш Чака, а второе — выигрыш Мэллори.

Таблица 1-4 демонстрирует нормальную форму игры "дилемма заключённого".

{caption: "Таблица 1-4. Нормальная форма игры дилемма заключённого", width: "100%"}
![Нормальная форма игры дилемма заключённого](images/GameTheory/prisoners-dilemma-table.png)

I> Аналогичную таблицу можно построить и для последовательной игры "дарообмен".

Найдём решение игры, используя её нормальную форму. Сначала рассмотрим стратегии Чака. Чтобы принять правильное решение, Чак должен предположить действие Мэллори. Узнать это действие Чак не может, поскольку игра параллельная.

Мнение игрока относительно стратегий других игроков называется **убеждением**. Выбор оптимальной стратегии строится на убеждении.

Предположим, Чак ожидает, что Мэллори даст показания. В этом случае Чаку тоже надо дать показания. Если он этого не сделает, то получит 3 года тюрьмы. Таким образом дача показаний Чаком — это наилучший ответ на дачу показаний Мэллори. Благодаря такому выбору, Чак получит два года вместо трёх.

Теперь допустим, что Чак убеждён: Мэллори будет молчать. В этом случае Чак выбирает между следующими вариантами:

* Молчать и получить один год.
* Дать показания и избежать наказания.

**Наилучший ответ** Чака, если Мэллори будет молчать, — дать показания.

Мы пришли к тому, что стратегия дать показания — это наилучший ответ Чака на любую стратегию Мэллори. Такая стратегия называется **доминирующей**. Стратегия Чака "молчать" называется **доминируемой**. Говорят, что стратегия "дать показания" доминирует над стратегией "молчать".

Повторим те же самые рассуждения для Мэллори. Мы придём к выводу, что его наилучший ответ на любую стратегию Чака — тоже дать показания. Пара стратегий "дать показания" от обоих участников будет равновесием Нэша в игре "дилемма заключённого".

Равновесием Нэша называется набор стратегий по одной на каждого участника. Каждая из этих стратегий является наилучшим ответом на действия других игроков.

"Дилемма заключённого" демонстрирует парадокс. Рациональные действия обоих участников приводят к решению, которое не даёт максимальную сумму выигрыша. Максимальная сумма -2 получается тогда, когда оба участника выбирают доминируемую стратегию "молчать". В этом случае каждый из них получает по одному году тюрьмы.

Объяснение парадокса в том, что равновесие Нэша в "дилемме заключённого" не является [оптимум по Парето](https://ru.wikipedia.org/wiki/Эффективность_по_Парето). Оптимум по Парето называется состояние системы при котором суммарное благосостояние её участников достигает максимума. Любое изменение этого состояние ухудшает благосостояние хотя бы одного участника.

В игре "дилемма заключённого" каждый участник пытается получить максимальную выгоду для себя. Это приводит к тому, что каждый из них получает меньше, чем мог бы. Если бы участники действовали с целью максимизировать общую выгоду, они бы получили лучший результат. Этим результатом был бы оптимум по Парето.

### 1.3.3 Смешанные стратегии

#### 1.3.3.1 Координационные игры

До сих пор мы рассматривали стратегии, которые называются **чистыми**. Чистая стратегия описывает действия игрока в каждом узле дерева игры без всякой неопределённости. 

Альтернатива чистой стратегии — это **смешанная стратегия**. В этом случае игрок выбирает одну из чистых стратегий случайным образом. Далее он следует выбранной стратегии до окончания партии.

Рассмотрим концепцию смешанной стратегии на примере **антикоординационной игры**.

В теории игр есть целый класс параллельных игр, которые называются [**координационными**](https://en.wikipedia.org/wiki/Coordination_game). Их участники делают выбор независимо друг от друга. Таблица выигрышей зависит от конкретной игры. В общем случае сумма выигрышей больше, если участники выбирают одно и то же действие. Если участники делают разный выбор и один из них от этого выигрывает, игра называется антикоординационной.

Наша антикоординационная игра моделирует штрафной удар в футболе. Для простоты предположим, что в штрафном ударе участвует только бьющий игрок и вратарь. Первый выбирает, в какую часть ворот отправить мяч: правую или левую. Во время удара он до последнего момента скрывает свои намерения. Поэтому вратарь не может предсказать направление мяча. После удара по мячу у него нет времени отреагировать. Поэтому вратарь должен заранее решить, какую сторону ворот защищать: правую или левую. В итоге получается игра с параллельными ходами.

Представим игру в нормальной форме. Выигрышем нападающего игрока будет процент забитых мячей при каждом исходе. Тогда выигрыш вратаря — это процент мячей, которые не попали в ворота. Мяч не попадает в ворота по двум причинам:

* Атакующий игрок промахнулся.
* Вратарь поймал мяч.

Для нашего примера не важно, что именно произошло. Важен только процент не попавших мячей.

Таблица 1-5 демонстрирует выигрыши игроков.

{caption: "Таблица 1-5. Нормальная форма антикоординационной игры", width: "100%"}
![Нормальная форма антикоординационной игры](images/GameTheory/soccer-game-table.png)

Согласно таблице 1-5 атакующему игроку лучше удаётся удар в правую часть ворот. В этом случае, если вратарь не угадал направление удара, мяч попадает в ворота в 90% случаев. Если же вратарь угадал сторону, мяч попадает с вероятностью 60%.

Удар атакующего игрока в левую часть ворот менее точен. При таком выборе мяч попадает в 80% случаев, если вратарь не угадывает сторону. Если же вратарь прикрывает левую часть ворот, мяч попадёт только в 50% случаев.

Найдём равновесие Нэша в этой игре. Начнём со стратегии "удар вправо" атакующего игрока. Наилучший ответ вратаря на неё — это стратегия "наклон вправо". Если атакующий игрок видит, что вратарь постоянно защищает правую сторону, ему лучше переключиться на стратегию "удар влево". Тогда лучшим ответом вратаря станет стратегия "наклон влево". Эти рассуждения показывают, что у каждого игрока нет наилучшего ответа на любое действие противника.

При равновесии Нэша игроки не могут увеличить свой выигрыш, изменив свою стратегию. В нашем примере происходит обратное. Вратарь увеличивает свой выигрыш, если переключается на стратегию, которая соответствует направлению удара атакующего игрока. То же самое справедливо и для атакующего: он увеличивает свой выигрыш, направляя удар в неприкрытую сторону ворот. Это означает, что в нашей игре нет равновесия Нэша для чистых стратегий.

Если ограничиться чистыми стратегиями, то "удар вправо" — лучший выбор для атакующего. В этом случае он стабильно забивает 60% мячей. При этом вратарь будет знать, что атакующий всегда выбирает правую сторону. Поэтому он её всегда прикрывает.

Проверим, можно ли улучшить результат атакующего игрока с помощью смешанной стратегии. Предположим, что он в 40% случаев бьёт вправо и в 60% случаев — влево. Тогда атакующий получит следующий процент забитых мячей, если вратарь всегда прикрывает правую сторону:
{line-numbers: false}
```
0.4 * 60 + 0.6 * 80 = 72
```

Если вратарь всегда прикрывает левую сторону, процент забитых мячей будет такой:
{line-numbers: false}
```
0.4 * 90 + 0.6 * 50 = 66
```

Эти расчёты показывают, что смешанная стратегию увеличивает шанс попадания мяча в ворота с 60% до 66%. Если вратарь поймёт, что атакующий чаще бьёт в левую часть ворот, он может использовать это с выгодой для себя. В этом случае вратарь будет всегда прикрывать левую часть ворот. Это ограничит процент забитых мячей на уровне 66%.

Проверим, можно ли улучшить результат атакующего игрока, если изменить пропорцию смешивания его чистых стратегий. При оптимальной пропорции, вратарь не сможет получить выгоду, выбрав одну из чистых стратегию. Другими словами ему будет безразлично, какую сторону ворот прикрывать.

Обозначим вероятность того, что атакующий выберет стратегию "удар вправо" как g. Тогда он выберет стратегию "удар влево" с вероятностью (1-g).

Запишем выигрыш атакующего игрока, если вратарь всегда выбирает стратегию "наклон вправо":
{line-numbers: false}
```
g * 60 + (1 - g) * 80
```

Если вратарь всегда выбирает "наклон влево", выигрыш атакующего станет таким:
{line-numbers: false}
```
g * 90 + (1 - g) * 50
```

Нам нужна пропорция, при которой выигрыш атакующего будет неизменным при любой чистой стратегии вратаря. Чтобы найти эту пропорцию, приравняем выигрыши атакующего при обоих выборах вратаря. Получим:
{line-numbers: false}
```
g * 60 + (1 - g) * 80 = g * 90 + (1 - g) * 50

(1 - g) * 30 = g * 30

30 = g * 60

g = 1/2
```

Согласно расчёту оптимальная пропорция смешивания стратегий атакующим игроком 50% на 50%. Проверим его выигрыш при выборе вратарём стратегии "наклон вправо":
{line-numbers: false}
```
0.5 * 60 + 0.5 * 80 = 70
```

А это выигрыш атакующего для стратегии вратаря "наклон влево":
{line-numbers: false}
```
0.5 * 90 + 0.5 * 50 = 70
```

В обоих случаях вероятность попадания мяча в ворота составляет 70%. Вратарь не может понизить этот выигрыш, сменив свою стратегию. Причина в том, что любая его стратегия приводит к выигрышу атакующего 70%. Таким образом мы нашли равновесие Нэша в смешанных стратегиях.

Обратите внимание, что смешивание стратегий в пропорции 50% на 50% не означает их поочерёдный выбор. Такая систематичность станет очевидна вратарю и он воспользуется ей, чтобы улучшить свой выигрыш. В результате выигрыш атакующего игрока окажется ниже ожидаемого 70.

К сожалению, человек не может случайно генерировать числа. При такой генерации всегда будет неявная систематичность. Лучшие результаты позволяют добиться [генераторы случайных чисел](https://360wiki.ru/wiki/Random_number_generation). Самый простой пример такого генератора — игральная кость.

В нашем примере атакующий игрок может проверять время. Момент такой проверки непредсказуем. В зависимости от показаний минутной и секундной стрелок, игрок может выбирать одну из чистых стратегий. Такой подход неидеален. Однако его результат будет лучше, чем если бы игрок сам выбирал стратегии случайно.

### 1.3.4 Комбинация последовательных и параллельных ходов

Мы рассмотрели несколько последовательных и параллельных игр. Теория игр моделирует реальные ситуации из различных сфер социальной жизни. Такие ситуации достаточно сложны. Поэтому представить их в виде простой игры удаётся редко. Однако, построить модель можно, если скомбинировать несколько последовательных и параллельных игр.

Рассмотрим пример. Игрок, которого мы назовём Предприниматель, собирается основать стартап. На первом ходу игры, он должен оценить риски и решить: инвестировать свои деньги в стартап или нет.

Допустим, что Предприниматель инвестирует в стартап. При этом на рынке есть другой игрок. Назовём его Конкурент. Он выпускает аналогичную продукцию. Спустя какое-то время Конкурент замечает появление стартапа. Наступает его очередь делать ход. Конкурент может либо начать [**ценовую войну**](https://ru.wikipedia.org/wiki/Ценовая_война) с Предпринимателем за покупателей, либо купить стартап.

Чтобы смоделировать ситуацию из нашего примера, нам надо совместить последовательную и параллельную игру. Иллюстрация 1-4 демонстрирует выигрыши Предпринимателя и Конкурента для всех возможных исходов.

{caption: "Иллюстрация 1-4. Представление игры стартап", width: "100%"}
![Представление игры стартап](images/GameTheory/startup-game.png)

В начальном узле a Предприниматель делает выбор. Если он отказывается от стартапа, то игра заканчивается в концевом узле b. В этом случае Предприниматель ничего не зарабатывает. Его выигрыш равен нулю. Выигрыш Конкурента равен 4, потому что он контролирует рынок. Это позволит ему установить на свой товар высокую цену.

Если Предприниматель решает основать стартап в узле a, наступает ход Конкурента в узле действия b. Конкурент может просто купить стартап. В этом случае каждый игрок получает выигрыш 2. Предприниматель заработал больше денег, чем инвестировал. Конкурент избавился от необходимости понижать цену в борьбе за покупателей. Покупка стартапа принесла ему убыток. Однако, Конкурент по прежнему контролирует рынок и устанавливает высокие цены на свой товар.

Если Конкурент вместо покупки стартапа решает выдавить стартап с рынка, начинается ценовая война в узле d. В этот момент игра перестаёт быть последовательной и становится параллельной.

Параллельную игру нагляднее представлять в нормальной форме. Поэтому на иллюстрации 1-4 появляется таблица выигрышей.

Предприниматель и Конкурент выставляют цены на свою продукцию одновременно. У каждого из них есть две стратегии: низкая и высокая цена. Если один из игроков выбирает низкую цену, а другой высокую, покупатели предпочтут товар по низкой цене. В этом случае выигрывает участник, установивший низкую цену. Если оба участника устанавливают низкую цену, они разделят покупателей поровну. В этом случае доход игроков будет небольшим. Если они оба выберут высокую цену, то снова разделят покупателей поровну. Однако, доход в этом случае будет больше.

Параллельная игра на иллюстрации 1-4 представляет собой "дилемму заключённых". Как мы выяснили ранее, равновесием Нэша в этой игре будет стратегия "низкая цена" от обоих участников.

Найдём решение всей игры на иллюстрации 1-4. Применим метод обратной индукции. Начнём с параллельной игры, к которой приводит ценовая война. Допустим, что Предприниматель и Конкурент не могут договориться и создать [картель](https://ru.wikipedia.org/wiki/Картель) на рынке. Этому мешает антимонопольное законодательство. Следовательно, в ценовой войне оба игрока могут получить только выигрыш 1.

Перейдём на предыдущий ход в узел решения b. Здесь Конкурент выбирает между ценовой войной и покупкой стартапа. Он анализирует результат ценовой войны и понимает, что она приведёт его к выигрышу 1. Вариант "купить стартап" принесёт выигрыш 2. Следовательно, наилучшим выбором для Конкурента будет купить стартап.

Далее мы переходим к начальному узлу a. Здесь Предприниматель анализирует, к чему приведёт создание стартапа. В худшем случае Конкурент начнёт ценовую войну. Тогда Предприниматель получит выигрыш 1. Если же Конкурент решит купить стартап, выигрыш Предпринимателя будет 2. Оба эти исхода лучше, чем исход в концевом узле c. В узле c Предприниматель ничего не получает и его выигрыш равен нулю. Следовательно, лучший выбор игрока в узле a — основать стартап.

Решение игры из нашего примера мы начали с ценовой войны в узле d. Эта ценовая война является частью более крупной игры. Такая часть называется **подыгрой**.

Подыгра — это часть многоходовой игры, представленной в развёрнутой форме. Дерево подыгры является частью дерева исходной игры. При этом их начальные узлы не совпадают. Начальный узел подыгры является одним из узлов действия дерева полной игры.

{pagebreak}
