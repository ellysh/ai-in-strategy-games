## 1.3 Представление игр

Теория игр предлагает несколько подходов для решения игры. Чтобы применить любой из них, игру надо представить в стандартной форме. Чаще всего применяются следующие три формы:

1. [**Развёрнутая форма**](https://ru.wikipedia.org/wiki/Развёрнутая_форма_игры) (экстенсивная или дерево игры).

2. [**Нормальная форма**](https://ru.wikipedia.org/wiki/Нормальная_форма_игры) (стратегическая или платёжная матрица).

3. **Форма характеристической функции**.

I> Намного реже применяются: [**краткая форма**](https://en.wikipedia.org/wiki/Succinct_game), [**сеть Петри**](https://ru.wikipedia.org/wiki/Сеть_Петри), [**графическая форма**](https://en.wikipedia.org/wiki/Graphical_game_theory) и [другие](https://en.wikipedia.org/wiki/Game_theory#Alternative_game_representations).

Выбор формы представления зависит от типа игры. Это вопрос наглядности и удобства вычислений. Таблица 1-2 приводит соответствие типов игр и форм представления.

{caption: "Таблица 1-2. Формы представления игр", width: "100%"}
| Тип игры | Форма представления |
| --- | --- |
| С последовательными ходами | Развёрнутая форма |
|  | |
| С параллельными ходами | Нормальная форма |
|  | |
| Кооперативная | Характеристическая функция |

Эта таблица не означает, что последовательные игры нельзя представить в нормальной форме, а параллельные — в развёрнутой. Такое представление возможно, но оно будет менее наглядным.

В зависимости от количества возможных стратегий выигрыши участников представляются в разной форме. Их демонстрирует таблица 1-3.

{caption: "Таблица 1-3. Представление выигрышей участников", width: "100%"}
| Тип игры | Представление выигрышей |
| --- | --- |
| Дискретная | Платёжная матрица |
|  | |
| Непрерывная | График наилучших ответов |

В этой книге мы рассмотрим развёрнутую и нормальную формы представления игр. С остальными формами вы можете познакомиться в учебнике по теории игр.

### 1.3.1 Развёрнутая форма игры

#### 1.3.1.1 Игра "дарообмен"

Рассмотрим классическую игру ["дарообмен"](https://ru.wikipedia.org/wiki/Дарообмен). Её описали американские экономисты Джордж Акерлоф и Дэнет Йеллен в статье "Гипотеза справедливой заработной платы и безработицы". Статья была опубликована в 1990 году.

Игра "дарообмен" моделирует рынок труда. В ней два участника: Работодатель и Работник. Первый ход делает Работодатель. Он предлагает Работнику оплату за выполнение некоторой работы. Второй ход Работника. Он принимает зарплату и выбирает уровень усилий, который потратит на выполнение работы. Работник не может отказаться от предложенной ему оплаты и вообще не делать работу.

Рассмотрим дискретный вариант игры, в котором у Работодателя есть только две стратегии:

1. Предложить высокую зарплату.
2. Предложить низкую зарплату.

В этом варианте игры у Работника тоже есть только две стратегии:

1. Принять зарплату и ответить высоким уровнем усилий при выполнении работы.
2. Принять зарплату и ответить низким уровнем усилий.

Представим игру в развёрнутой форме. Для этого построим **дерево игры**. Оно отражает связь всех возможных действий участников и исходов игры, к которым они приводят.

Дерево игры начинается в крайней левой точке, если оно ориентировано горизонтально. Если дерево ориентировано вертикально, то его начало — крайняя верхняя точка. Эта точка называется **начальным узлом** или корнем. В этом узле делает ход первый участник.

Из начального узла дерева исходят отрезки. Каждый из них соответствует варианту хода первого участника. Эти отрезки называются **ветвями**.

Каждая ветвь соединяет два узла дерева. Узлы бывают двух типов:

* **Узел действия** — в нём какой-то участник делает ход.
* **Концевой узел** — обозначает конкретный исход игры.

В концевом узле игра заканчивается и ни один из участников уже не может сделать ход.

Иллюстрация 1-1 демонстрирует дерево игры "дарообмен".

{caption: "Иллюстрация 1-1. Дерево игры дарообмен", height: "50%"}
![Дерево игры дарообмен](images/GameTheory/gift-exchange-game-tree.png)

На иллюстрации вы видите семь точек: a, b, c, d, e, f, g. Первые три a, b, c — это узлы действия. В них участники делают ходы. Исходящие из этих узлов ветви соответствуют возможным ходам игроков. Последние четыре точки d, e, f, g — это концевые узлы. Они соответствуют возможным исходам игры.

Игра начинается в точке a. В ней Работодатель предлагает уровень зарплаты. Если уровень высокий, Работник делает свой ход в узле b. Он выбирает уровень своих усилий для выполнения работы. Если Работодатель предложил низкую зарплату, Работник выбирает уровень усилий в узле c.

Ход Работника в узле b или c определит исход игры. Всего возможно четыре исхода. Каждому из них соответствует концевой узел: d, e, f или g.

В каждом возможном исходе игры участники получают разный выигрыш. На иллюстрации 1-1 выигрыши обозначаются парой цифр. Первая синяя цифра — это выигрыш Работодателя. Вторая красная цифра — выигрыш Работника.

Рассмотрим выигрыши участников. Наилучший исход для обоих — узел d. Это случай, когда Работодатель предложил высокую зарплату и Работник качественно выполнил работу. Каждый получает то, что хотел. Поэтому выигрыши обоих участников равны 2.

В концевом узле e Работодатель не получает желаемого. Он заплатил большую сумму, но Работник отработал небрежно. Выигрыш Работодателя при таком исходе минимальный — 0. С другой стороны, Работник получил большие деньги и потратил минимум усилий. Поэтому его выигрыш максимальный — 3.

В концевом узле f Работник не получает желаемого. Он выполнил заказ качественно, но получил за него мало. Выигрыш Работника при таком исходе минимальный — 0. Работодатель наоборот получил хороший результат за небольшие деньги. Его выигрыш максимальный — 3.

Исход игры в узле g соответствует случаю, когда Работодатель заплатил небольшую сумму и Работник сделал заказ небрежно. В результате Работодатель не потратил много денег, а Работник сэкономил свои силы. Оба участника получают низкие выигрыши по 1.

Найдём решение игры. Для этого учтём два момента. Во-первых, теория игр предполагает, что все участники взаимодействия — это рациональные агенты. Следовательно, их главная цель заключается в максимизации своего выигрыша.

Во-вторых, упростим ситуацию. Допустим, что сделка между Работодателем и Работником происходит однократно. Это значит, что второй попытки договориться у них не будет. В этом случае Работнику нет смысла показать себя с хорошей стороны.

Для анализа применим метод [**обратной индукции**](https://ru.wikipedia.org/wiki/Обратная_индукция). Он также известен как метод **обратных рассуждений**. Его впервые применили фон Нейман и Моргенштерн для анализа игр с нулевой суммой в книге "Теория игр и экономическое поведение".

Обратная индукция предлагает рассматривать ходы игроков в обратном порядке, начиная с последнего. Таким образом мы находим наилучший выбор участника, который ходит последним. Затем с учётом этого, ищем наилучший предпоследний ход. Так мы продолжаем идти по дереву игры назад до тех пор, пока не достигнем начального узла.

Какой наилучший выбор у Работника? Он делает свой последний ход либо в узле b, либо в — c. В первом случае Работодатель заплатил большую сумму. Тогда у Работника есть два варианта: выполнить работу хорошо или плохо. Первый выбор приведёт к исходу в узле d. Это неплохой результат, потому что и Работодатель и Работник получают выигрыш 2. Но исход в узле e лучше для Работника. В нём он получает выигрыш 3, потому что ему не пришлось сильно напрягаться. Значит, в узле b Работнику выгоднее выбрать вариант "мало усилий". Так он максимизирует свой выигрыш.

Теперь рассмотрим второй случай, когда Работодатель заплатил мало. Тогда Работник делает выбор в узле c. Если он решит работать добросовестно, это приведёт к исходу f. Тогда его выигрыш минимален. Работник получил мало, но потратил много усилий. Если же выбрать мало усилий, результат окажется лучше. Работник заработает мало, но сэкономит свои сил. Следовательно, лучший выбор для Работника в узле c — приложить мало усилий.

Наши рассуждения привели к тому, что Работнику всегда выгодно приложить мало усилий. Его решение никак не зависит от уровня зарплаты. Этот вывод справедлив для рационального агента, который стремится максимизировать свой выигрыш в однократной игре. Правила игры разрешают ему поступить нечестно в узле b и выбрать вариант "мало усилий". При этом у Работодателя нет никакой возможности наказать Работника за обман.

Теперь перейдём по дереву игры назад к начальному узлу a. В этом узле принимает решение Работодатель. Он тоже рациональный агент, который стремится максимизировать свой выигрыш. Поэтому он применит метод обратной индукции, чтобы спрогнозировать действия Работника. Так же как и мы Работодатель придёт к выводу: Работнику выгодно сделать заказ небрежно. В этом случае Работодателю нет никакого смысла платить много. Он всё равно получит некачественную работу, независимо от потраченной суммы. Тогда его лучший выбор — дать низкую зарплату.

Концевой узел g является решением игры "дарообмен". Он соответствует наилучшим стратегиям Работодателя и Работника. На иллюстрации 1-1 лучшие ходы для каждого игрока обозначены стрелками.

Если поменяются условия игры, то изменится и её решение. Допустим, Работодатель и Работник заключают контракт, имеющий юридическую силу. Тогда Работодатель сможет потребовать от Работника компенсации за плохую работу через суд. В этом случае выигрыши меняются. В исходе узла e Работник получит не 3, а меньше в зависимости от суммы штрафа. Тогда ему станет невыгодно отвечать плохой работой на высокую зарплату.

#### 1.3.1.2 Игра "стоножка"

Рассмотрим игру с более сложным деревом. Она называется ["стоножка"](https://360wiki.ru/wiki/Centipede_game) или "Сороконожка". Идею "стоножки" предложил американский экономист Роберт Розенталь в 1981 году.

В игре два участника. Они по очереди выбирают одно из двух действий: взять стопку монет на столе или передать ход. При передаче хода, стопка монет увеличивается. Если никто из участников не берёт стопку монет на десятом ходу, игра заканчивается. В этом случае никто не получает деньги.

Для удобства назовём участников Алиса и Боб. Иллюстрация 1-2 демонстрирует дерево игры "стоножка".

{caption: "Иллюстрация 1-2. Дерево игры стоножка", width: "100%"}
![Дерево игры стоножка](images/GameTheory/centipede-game-tree.png)

Игра начинается с хода Алисы в узле a. Перед ней на столе лежит 10 монет. Алиса выбирает одно из действий: взять монеты или пропустить ход. Если Алиса берёт монеты, игра закончится в концевом узле b. Тогда выигрыш Алисы равен 10, а Боба — 0. Если Алиса пропускает ход, число монет на столе удваивается и игра перейдёт в узел c.

В узле c делает ход Боб. Он может взять 20 монет и получить выигрыш 20 в концевом узле d. Альтернативное решение — передать ход Алисе. Тогда игра перейдёт в узел e. В нём Алиса будет решать, брать ли ей 30 монет.

Игра продолжается до тех пор, пока на столе не накопится 100 монет. Последний ход делает Боб в узле x. Он выбирает: или взять 100 монет, или пропустить ход. Если Боб пропускает ход, игра заканчивается в узле z. Тогда он и Алиса ничего не получают. Оба игрока знают, что игра заканчивается после любого хода Боба в узле x.

Чтобы решить игру "стоножка", применим метод обратной индукции. Начнём с последнего хода Боба в узле x. Очевидно, его лучшим выбором будет взять 100 монет.

Перейдём к предпоследнему ходу Алисы. Она решает: брать ли ей 90 монет или пропустить ход. Алиса знает, что на последнем ходе в узле x Боб возьмёт монеты. Поэтому она должна сделать это раньше и взять 90 монет на предпоследнем ходе.

На предпредпоследнем ходу Боб рассуждает так же как Алиса. Он знает, что она возьмёт 90 монет на следующем ходу. Поэтому Боб должен её опередить и взять 80 монет.

Продолжим это рассуждение назад до первого хода. Тогда окажется, что Алиса должна взять 10 монет в начальном узле a. В противном случае Боб возьмёт 20 монет уже на втором ходу.

"Стоножка" — это один из примеров, когда экспериментальные данные не совпадают с решением теории игр. Игру неоднократно проводили среди студентов университетов. В этих экспериментах партия редко завершалась на первом ходу. Гораздо чаще участники пропускали несколько ходов и ждали увеличения суммы выигрыша.

Есть несколько объяснений расхождению теории и практики. Одно из них указывает на неопытность игроков. Если участник играет в "стоножку" впервые, он просчитывает наперёд только несколько следующих ходов. Это приводит к тому, что участники склонны брать монеты ближе к последнему ходу.

Экономисты Игнасио Паласиос-Уэрта и Оскар Волий проводили игру "стоножка" среди профессиональных шахматистов в 2003 году. Результаты эксперимента оказались ближе к предсказанию теории. Участники часто брали монеты на первом ходу. Вероятная причина в том, что шахматистам хорошо знаком методом обратной индукции. Поэтому они просчитывают игру до конца, перед тем как сделать первый ход.

Другое объяснение говорит об ожидаемой иррациональности игроков. Когда первый участник пропускает ход в узле a, он даёт сигнал оппоненту, что готов повторить своё решение. Исходя из этого, второй участник тоже пропускает свой ход в узле c. Таким образом игра продолжается, пока стопка монет не станет достаточно большой. Тогда один из игроков её берёт.

Если участники могут договориться, решение игры изменится. В этом случае игра становится кооперативной. Оба участника должны ждать, пока сумма на столе не станет максимальной. Тогда второй игрок забирает монеты на последнем ходу в точке x. После этого он делит выигрыш с первым игроком пополам.

### 1.3.2 Нормальная форма игры

#### 1.3.2.1 Игра "Дилемма заключённого"

В 1950 году американские математики Мерил Флад и Мелвин Дрешер сформулировали фундаментальную проблему теории игр. Они описали её как математическую задачу. Эта задача стала известна узкому кругу специалистов по теории игр.

В том же 1950 году канадский математик Альберт Такер готовил [семинар для психологов](https://pr.princeton.edu/news/95/q1/0126tucker.html) в Принстонском университете. Он собирался рассказать, какого типа задачи решает теория игр. Для этого он представил задачу Флада и Дрешера в виде детективной истории. В такой форме она стала понятна для нематематиков. Позже именно интерпретация Такера получила широкую известность как ["дилемма заключённого"](https://ru.wikipedia.org/wiki/Дилемма_заключённого).

Альберт Такер сформулировал "дилемму заключённого" следующим образом:

> Два преступника A и B были арестованы и заключены в тюрьму. Они находятся в разных камерах и не могут общаться друг с другом. У полиции нет достаточных доказательств, чтобы осудить преступников по основному делу. Есть только доказательства для менее серьёзного обвинения. Полиция предлагает каждому заключённому выбор: либо дать показания против другого, либо молчать. При этом результаты будут следующими:

> * A и B дают показания против друг друга: каждый получает два года тюрьмы.

> * A и B молчат: каждый получает год тюрьмы.

> * A даёт показания против B, но B хранит молчание: A будет освобождён, а B получит три года тюрьмы.

> * A молчит, а B даёт показания против него: A получает три года тюрьмы, а B будет освобождён.

> Как поступить заключённым, чтобы получить минимальные сроки?

Это параллельная игра с одновременными ходами. Фактически участники могут делать выбор друг за другом. Но это не меняет параллельный характер игры. Потому что в момент принятия решения каждый участник не знает выбор другого.

Для удобства назовём участников Чак и Мэллори. Сначала представим игру в уже знакомой нам развёрнутой форме. Её демонстрирует иллюстрация 1-3.

{caption: "Иллюстрация 1-3. Дерево игры дилемма заключённого", height: "50%"}
![Дерево игры дилемма заключённого](images/GameTheory/prisoners-dilemma-tree.png)

В параллельной игре участники делают ходы одновременно. Но структура дерева игры предполагает очерёдность ходов. Выберем любого из участников, который делает выбор в начальном узле a. Пусть это будет Чак.

Чак выбирает одно из двух действий: молчать или дать показания против Мэллори. После этого Мэллори решает, как ему поступить в узле b или c. При этом есть одно важное обстоятельство. Мэллори делает ход, не зная в каком узле он находится. Эта нехватка информации возникает из-за стратегической неопределённости.

Чтобы отобразить стратегическую неопределённость на дереве игры, соединим узлы b и c пунктирной линией. Такие соединённые узлы называются **информационным множеством**. Когда игрок делает ход в одном из узлов информационного множества, он не знает какой именно это узел. Поэтому выбор игрока в пределах информационного множества означает один и тот же ход для всех узлов этого множества.

Итак, Мэллори делает свой ход. Он выбирает одно из двух действий: молчать или дать показания против Чака. Это действие выполняется в обоих узлах b и c. Исход игры зависит от выбора Чака в узле a и выбора Мэллори в информационном множестве узлов b и c.

Теперь чтобы решить "дилемму заключённого", применим метод обратной индукции. Начнём с последнего хода Мэллори в узлах b и c. Мэллори знает выигрыши при каждом исходе игры. Если он будет молчать, то в лучшем случае получит 1 год тюрьмы. Но для этого Чак тоже должен молчать. Проблема в том, что Мэллори не знает выбор Чака. Если Чак дал показания, то молчание обернётся для Мэллори 3-мя годами тюрьмы.

Второй вариант для Мэллори: дать показания. Тогда он может вообще избежать наказания, если Чак промолчит. Если же Чак даст показания, то Мэллори получит 2 года тюрьмы. Этот вариант лучше, чем 3 года. Из этого следует, что дать показания — лучший ответ Мэллори на любое действие Чака.

Перейдём в начальный узел a дерева игры. Чак применит метод обратной индукции. Так он поймёт, что наилучший выбор Мэллори — дать показания. Поэтому реальный выбор Чака следующий:

* Молчать и получить 3 года тюрьмы.
* Дать показания и получить 2 года.

Наилучший выбор для Чака — тоже дать показания. Таким образом решением "дилеммы заключённого" будет концевой узел g с выигрышами участников -2 и -2.

Деревья игр "дилемма заключённого" и "дарообмен" похожи. Если добавить число 3 ко всем выигрышам на иллюстрации 1-3, они станут такими же как на иллюстрации 1-1. Мы применили метод обратной индукции к обеим играм и получили одинаковое решение. Это означает, что "дарообмен" представляет собой последовательную версию игры "дилемма заключённого".

Смена типа игры с последовательного на параллельный не меняет её решение. Это справедливо для игр "дарообмен" и "дилемма заключённого". Но так происходит не всегда. В одних случаях в последовательной версии игры преимущество получает участник, делающий первый ход. В других случаях преимущество у игрока на втором ходе. Из-за этого меняется решение игры.

Теперь представим игру "дилемма заключённого" в нормальной форме. Для этого построим таблицу. Её строки соответствуют стратегиям Чака, а столбцы — стратегиям Мэллори. Каждая ячейка соответствует одному из исходов игры. К этому исходу приводит стратегия Чака из соответствующей строки и стратегия Мэллори из соответствующего столбца. Первое число в ячейке означает выигрыш Чака, а второе — выигрыш Мэллори.

Таблица 1-4 демонстрирует нормальную форму игры "дилемма заключённого".

{caption: "Таблица 1-4. Нормальная форма игры дилемма заключённого", width: "100%"}
![Нормальная форма игры дилемма заключённого](images/GameTheory/prisoners-dilemma-table.png)

I> Аналогичную таблицу можно построить и для последовательной игры "дарообмен".

Воспользуемся нормальной формой игры, чтобы найти её решение. Сначала рассмотрим стратегии Чака. Чтобы принять правильное решение, Чак должен предположить действие Мэллори. Узнать это действие наверняка Чак не может, поскольку игра параллельная.

I> Мнение игрока относительно стратегий других игроков называется **убеждением**. Выбор оптимальной стратегии строится на убеждении.

У Чака может быть одно из двух убеждений относительно стратеги Мэллори:

* Мэллори даст показания.
* Мэллори будет молчать.

В первом случае Чаку тоже надо дать показания. Тогда он получит только 2 года тюрьмы. Если Чак будет молчать, то получит 3 года тюрьмы. Таким образом вариант "дать показания" — это наилучший ответ Чака на дачу показаний Мэллори.

Рассмотрим второй случай. Чак убеждён, что Мэллори будет молчать. Тогда Чак выбирает между следующими вариантами:

* Молчать и получить 1 год.
* Дать показания и избежать наказания.

Второй вариант для Чака предпочтительнее. Это означает, что его наилучший ответ — дать показания.

Мы выяснили, что стратегия "дать показания" — это наилучший ответ Чака на любое действие Мэллори. Такая стратегия Чака называется **доминирующей**. Его стратегия "молчать" называется **доминируемой**. Говорят, что стратегия "дать показания" доминирует над стратегией "молчать".

Повторим те же самые рассуждения с точки зрения Мэллори. Мы придём к тому же выводу. Наилучший ответ Мэллори на любое действие Чака — тоже дать показания. Стратегии "дать показания" от обоих участников будут равновесием Нэша в игре "дилемма заключённого".

I> **Равновесием Нэша** называется набор стратегий: по одной на каждого участника. Каждая из этих стратегий является наилучшим ответом на любые действия других игроков.

"Дилемма заключённого" демонстрирует парадокс. Рациональные действия обоих участников приводят к решению, которое не даёт максимальную сумму выигрыша. Максимальная сумма -2 получается тогда, когда оба участника выбирают доминируемую стратегию "молчать". В этом случае каждый из них получает по одному году тюрьмы.

Парадокс объясняют так: равновесие Нэша в "дилемме заключённого" не является оптимум по Парето. [**Оптимум по Парето**](https://ru.wikipedia.org/wiki/Эффективность_по_Парето) — это состояние системы, при котором суммарное благосостояние её участников достигает максимума. Любое изменение этого состояния ухудшает благосостояние хотя бы одного участника.

В игре "дилемма заключённого" каждый участник стремится максимизировать только свою выгоду. Из-за этого каждый получает меньше, чем мог бы. Если бы участники стремились максимизировать общую выгоду, они бы получили лучшие результаты для себя. Таким исходом игры и был бы оптимум по Парето.

### 1.3.3 Смешанные стратегии

#### 1.3.3.1 Координационные игры

До сих пор мы рассматривали стратегии, которые называются чистыми. **Чистая стратегия** однозначно определяет действие игрока в каждом узле дерева игры.

Альтернатива чистой стратегии — это **смешанная стратегия**. В этом случае игрок выбирает одну из чистых стратегий случайным образом. Далее он следует выбранной стратегии до окончания партии.

Рассмотрим концепцию смешанной стратегии на примере антикоординационной игры.

В теории игр есть целый класс параллельных игр, которые называются [**координационными**](https://en.wikipedia.org/wiki/Coordination_game). Их участники делают выбор независимо друг от друга. Таблица выигрышей зависит от конкретной игры. В общем случае сумма выигрышей больше, если участники выбирают одно и то же действие. Если участники делают разный выбор и один из них от этого выигрывает, игра называется **антикоординационной**.

Наша антикоординационная игра моделирует штрафной удар в футболе. Для простоты предположим, что в штрафном ударе участвует только бьющий игрок и вратарь. Первый выбирает, в какую часть ворот отправить мяч: правую или левую. Во время удара он до последнего момента скрывает свои намерения. Из-за этого вратарь не знает направление мяча. После удара по мячу у него нет времени отреагировать. Поэтому вратарь должен заранее решить, какую сторону ворот защищать: правую или левую. В итоге получается игра с параллельными ходами.

Представим игру в нормальной форме. Выигрышем нападающего игрока будет процент забитых мячей при каждом исходе. Тогда выигрыш вратаря — это процент мячей, которые не попали в ворота. Мяч не попадает в ворота по двум причинам:

* Атакующий игрок промахнулся.
* Вратарь поймал мяч.

Для нашей модели неважно, что именно произошло. Важен только процент не попавших мячей.

Таблица 1-5 демонстрирует выигрыши игроков.

{caption: "Таблица 1-5. Нормальная форма антикоординационной игры", width: "100%"}
![Нормальная форма антикоординационной игры](images/GameTheory/soccer-game-table.png)

Согласно таблице 1-5, атакующему игроку лучше удаётся удар в правую часть ворот. При таком ударе мяч попадёт в ворота с вероятностью 90%, если вратарь не угадал сторону. Если вратарь прикрыл правую часть ворот, мяч попадёт с вероятностью 60%.

Удар атакующего игрока в левую часть ворот менее точен. При таком выборе мяч попадёт в ворота с вероятностью 80%, если вратарь не угадал сторону. Если вратарь прикрывает левую часть ворот, мяч попадёт только в 50% случаев.

Найдём равновесие Нэша в этой игре. Начнём со стратегии "удар вправо" атакующего игрока. Наилучший ответ вратаря на неё — это стратегия "наклон вправо". Если атакующий игрок видит, что вратарь постоянно защищает правую сторону, ему лучше переключиться на стратегию "удар влево". Тогда лучшим ответом вратаря станет стратегия "наклон влево". Эти рассуждения показывают, что у игроков нет наилучшего ответа на любое действие оппонента.

При равновесии Нэша игроки не могут увеличить свой выигрыш, изменив стратегию. В нашем случае происходит обратное. Вратарь увеличивает свой выигрыш, если переключается на стратегию, которая соответствует направлению удара атакующего игрока. То же самое справедливо и для атакующего: он увеличивает свой выигрыш, направляя удар в неприкрытую сторону ворот. Это означает, что в нашей игре нет равновесия Нэша для чистых стратегий.

Если ограничиться чистыми стратегиями, то "удар вправо" — лучший выбор для атакующего. В этом случае он стабильно забивает 60% мячей. При этом вратарь будет знать, что атакующий всегда бьёт в правую сторону. Поэтому он всегда будет её прикрывать.

Проверим, можно ли улучшить результат атакующего игрока с помощью смешанной стратегии. Пусть он в 40% случаев бьёт вправо и в 60% случаев — влево. Тогда атакующий получит следующий процент забитых мячей, если вратарь всегда прикрывает правую сторону:
{line-numbers: false}
```
0.4 * 60 + 0.6 * 80 = 72
```

Если вратарь всегда прикрывает левую сторону, процент забитых мячей будет такой:
{line-numbers: false}
```
0.4 * 90 + 0.6 * 50 = 66
```

Эти расчёты показывают, что смешанная стратегия увеличивает шанс попадания мяча в ворота с 60% до 66%. Разберёмся, почему мы взяли худший случай 66%, а не 72%. Рано или поздно вратарь поймёт, что атакующий чаще бьёт в левую часть ворот. Тогда он воспользуется этим с выгодой для себя. Вратарь станет всегда прикрывать левую часть ворот. Это ограничит процент забитых мячей на уровне 66%.

Проверим, сможет ли атакующий игрок улучшить свой результат, если изменит пропорцию смешивания чистых стратегий. При оптимальной пропорции вратарь не сможет получить выгоду, выбрав одну из чистых стратегий. Другими словами, ему будет безразлично, какую сторону ворот прикрывать.

Обозначим буквой g вероятность того, что атакующий выберет чистую стратегию "удар вправо". Тогда он выберет стратегию "удар влево" с вероятностью `(1-g)`.

Запишем выигрыш атакующего игрока, если вратарь всегда выбирает стратегию "наклон вправо":
{line-numbers: false}
```
g * 60 + (1 - g) * 80
```

Если вратарь всегда выбирает "наклон влево", выигрыш атакующего станет таким:
{line-numbers: false}
```
g * 90 + (1 - g) * 50
```

Нам нужна пропорция, при которой выигрыш атакующего будет неизменным при любой чистой стратегии вратаря. Чтобы найти эту пропорцию, приравняем выигрыши атакующего при обоих выборах вратаря. Получим:
{line-numbers: false}
```
g * 60 + (1 - g) * 80 = g * 90 + (1 - g) * 50

(1 - g) * 30 = g * 30

30 = g * 60

g = 1/2
```

Согласно расчёту, атакующий игрок получит наилучший результат, если будет смешивать свои стратегии в пропорции 50% на 50%. Найдём его выигрыш при выборе вратарём стратегии "наклон вправо":
{line-numbers: false}
```
0.5 * 60 + 0.5 * 80 = 70
```

Теперь рассчитаем выигрыш атакующего при стратегии вратаря "наклон влево":
{line-numbers: false}
```
0.5 * 90 + 0.5 * 50 = 70
```

В обоих случаях вероятность попадания мяча в ворота составляет 70%. Вратарь не может понизить этот выигрыш, сменив свою стратегию. Его любая чистая стратегия приводит к выигрышу атакующего 70%. Это означает, что мы нашли равновесие Нэша в смешанных стратегиях.

Обратите внимание, что смешивание стратегий в пропорции 50% на 50% не означает их поочерёдный выбор. Такая систематичность станет очевидна вратарю. Он воспользуется ей, чтобы улучшить свой выигрыш. В результате этого выигрыш атакующего игрока окажется ниже ожидаемых 70%.

К сожалению, человек не способен генерировать длинную последовательность случайных чисел. В ней всегда будет неявная систематичность. Гораздо лучшие результаты дают [**генераторы случайных чисел**](https://360wiki.ru/wiki/Random_number_generation). Самый простой пример такого генератора — игральная кость.

Вернёмся к нашей антикоординационной игре. На что может ориентироваться атакующий, чтобы случайно выбирать чистую стратегию? Один из вариантов — проверять время перед ударом. Момент такой проверки непредсказуем. В зависимости от показаний минутной и секундной стрелок, игрок должен выбрать одну из чистых стратегий. Такой подход неидеален. Но его результат гораздо лучше, чем если бы игрок самостоятельно выбирал стратегии.

### 1.3.4 Комбинация последовательных и параллельных ходов

Мы рассмотрели несколько последовательных и параллельных игр. Они представляют собой типовые модели для относительно простых взаимодействий. Реальные ситуации из жизни, как правило, намного сложнее. Часто они не укладываются в готовую типовую модель.

Чтобы создать достоверную модель сложного взаимодействия, есть несколько подходов. Один из них — комбинирование типовых последовательных и параллельных игр. Познакомимся с этим подходом на примере.

Предположим, что некоторый Предприниматель собирается основать фармацевтический стартап. При этом на рынке уже есть фирма Конкурент, которая выпускает подобную продукцию. Предприниматель хочет воспользоваться теорией игр, чтобы оценить возможные риски.

Историю со стартапом можно представить как комбинацию двух игр: последовательной и параллельной. На первом этапе идёт последовательная игра. В ней Предприниматель принимает решение: основать стартап или отказаться от этой идеи. Далее на его действие отвечает Конкурент. Он может или купить стартап, или начать ценовую войну.

I> [**Ценовая война**](https://ru.wikipedia.org/wiki/Ценовая_война) — это форма рыночной конкуренции, при которой компании применяют агрессивную ценовую стратегию. Она заключается в серии последовательных снижений цен на товары для привлечения покупателей.

Если Конкурент выбирает ценовую войну, начинается второй этап — параллельная игра. В ней Предприниматель и Конкурент назначают цену на свой товар.

Ценовая война может быть и последовательной игрой. Для этого один из участников должен установить цену первым, а другой принимает решение, исходя из этой цены. В нашем примере предположим, что такой возможности у Предпринимателя и Конкурента нет. Они должны установить свою цену до того, как узнают решение друг друга.

Последовательную игру представим в развёрнутой форме, а параллельную — в нормальной форме. Результат демонстрирует иллюстрация 1-4.

{caption: "Иллюстрация 1-4. Представление игры стартап", width: "100%"}
![Представление игры стартап](images/GameTheory/startup-game.png)

В начальном узле a Предприниматель делает выбор. Если он отказывается от стартапа, то игра заканчивается в концевом узле c. В этом случае Предприниматель ничего не зарабатывает и его выигрыш равен нулю. Выигрыш Конкурента равен 4, потому что он контролирует рынок. Это позволит ему установить на свой товар высокую цену.

Если Предприниматель решает основать стартап, наступает ход Конкурента в узле b. Конкурент может просто купить стартап. В этом случае каждый игрок получает выигрыш 2. Предприниматель заработал больше денег, чем инвестировал. Конкуренту не нужно понижать цену в борьбе за покупателей. Покупка стартапа принесла ему убыток. Но Конкурент по-прежнему контролирует рынок и устанавливает высокие цены на свой товар.

Если Конкурент вместо покупки стартапа решает вытеснить Предпринимателя с рынка, начинается ценовая война в узле d. В этот момент игра перестаёт быть последовательной и становится параллельной.

Параллельную игру нагляднее представлять в нормальной форме. Поэтому на иллюстрации 1-4 мы видим таблицу выигрышей около узла d.

Предприниматель и Конкурент выставляют цены на свою продукцию одновременно. У каждого из них есть две стратегии: низкая и высокая цена. Если один игрок выбирает низкую цену, а другой высокую, покупатели предпочтут товар по низкой цене. В этом случае выигрывает участник, установивший низкую цену. Если оба участника выбирают низкую цену, они разделят покупателей поровну. В этом случае доход обоих игроков будет небольшим. Если они оба выберут высокую цену, то снова разделят покупателей поровну. Но в этом случае доход будет больше.

Параллельная игра на иллюстрации 1-4 представляет собой "дилемму заключённого". Как мы уже выяснили, равновесием Нэша в ней будет стратегия "низкая цена" от обоих участников.

Найдём решение всей игры, представленной на иллюстрации 1-4. Для этого применим метод обратной индукции. Начнём с узла d, к которому приводит решение Конкурента начать ценовую войну. Перед нами параллельная игра типа "дилемма заключённого". Конкурент не желает отдавать свою долю рынка новой компании. Поэтому никаких договорённостей между участниками быть не может. Поэтому каждый из них предпочтёт доминирующую стратегию "низкая цена". В результате оба получат выигрыш 1.

Перейдём на предыдущий ход в узел действия b. Здесь Конкурент выбирает между ценовой войной и покупкой стартапа. Он анализирует результат ценовой войны и понимает, что она даст ему выигрыш 1. Альтернативный вариант "купить стартап" принесёт выигрыш 2. Следовательно, наилучший выбор для Конкурента в узле b — это купить стартап.

Далее мы переходим к начальному узлу a. Здесь Предприниматель оценивает, к чему приведёт создание стартапа. В худшем случае Конкурент начнёт ценовую войну. Тогда Предприниматель получит выигрыш 1. Если Конкурент решит купить стартап, выигрыш Предпринимателя будет 2. Оба эти исхода лучше, чем в концевом узле c. В узле c Предприниматель ничего не зарабатывает и его выигрыш равен нулю. Следовательно, его лучший выбор в узле a — основать стартап.

Решением полной игры будет концевой узел e — покупка стартапа Конкурентом. Именно к этому исходу придёт игра, если оба участника будут следовать своим оптимальным стратегиям.

Мы рассмотрели сценарий создания стартапа. Модель взаимодействия Предпринимателя и Конкурента представляет собой многоходовую последовательную игру. Её дерево представлено на иллюстрации 1-4. В узле d наступает фаза новой параллельной игры. Такая часть более крупной игры называется подыгрой.

[**Подыгра**](https://ru.wikipedia.org/wiki/Подыгра) — это любая часть многоходовой игры. Если представить и игру, и подыгру в развёрнутой форме, то подыгра должна иметь следующие свойства:

1. У неё есть только один начальный узел. Причём в информационном множестве этот узел единственный.

2. Если какой-то узел действия входит в подыгру, то все следующие из него узлы тоже входят в подыгру.

3. Если один узел какого-то информационного множества входит в подыгру, то все узлы этого множества входят в подыгру.

Подыгра ценовая война из нашего примера удовлетворяет всем этим свойствам.

{pagebreak}
