## Представление игр

Теория игр предлагает несколько подходов, чтобы найти решение игры.

Для поиска решения, игру надо представить в стандартной форме. Чаще всего применяются следующие три формы:

1. [**Развёрнутая форма**](https://ru.wikipedia.org/wiki/Развёрнутая_форма_игры) (экстенсивная или дерево игры).

2. [**Нормальная форма**](https://ru.wikipedia.org/wiki/Нормальная_форма_игры) (стратегическая или платёжная матрица).

3. **Форма характеристической функции**.

I> Кроме приведённого списка также есть [**краткая форма**](https://en.wikipedia.org/wiki/Succinct_game), [**сеть Петри**](https://ru.wikipedia.org/wiki/Сеть_Петри), [**графическая форма**](https://en.wikipedia.org/wiki/Graphical_game_theory) и [другие](https://en.wikipedia.org/wiki/Game_theory#Alternative_game_representations).

Форма представления игры зависит от её типа. Игры одного типа нагляднее представлять в одной форме, а другого типа — в другой. Таблица 1-2 демонстрирует соответствие типов игр и форм представления.

{caption: "Таблица 1-2. Формы представления игр", width: "100%"}
| Тип игры | Форма представления |
| --- | --- |
| С последовательными ходами | Развёрнутая форма |
|  | |
| С параллельными ходами | Нормальная форма |
|  | |
| Кооперативная | Характеристическая функция |

Эта таблица не означает, что последовательные игры нельзя представить в нормальной форме, а параллельные — в развёрнутой. Такое представление возможно, но оно будет менее наглядно.

Есть дискретные и непрерывные игры. Для представления выигрышей участников в каждом случае используются разные подходы. Их демонстрирует таблица 1-3.

{caption: "Таблица 1-3. Представление выигрышей участников", width: "100%"}
| Тип игры | Представление выигрышей |
| --- | --- |
| Дискретная | Платёжная матрица |
|  | |
| Непрерывная | График наилучших ответов |

В этой книге мы рассмотрим развёрнутую и нормальную формы представления игр. С остальными формами вы можете познакомится в учебнике по теории игр.

### Развёрнутая форма игры

#### Игра "дарообмен"

Рассмотрим классическую игру ["дарообмен"](https://ru.wikipedia.org/wiki/Дарообмен). Её описали американские экономисты Джордж Акерлоф и Дэнет Йеллен в статье "Гипотеза справедливой заработной платы и безработицы". Статья была опубликована в 1990 году.

Игра "дарообмен" моделирует рынок труда. В игре два участника: Работодатель и Работник. Первым ходит Работодатель. Он предлагает зарплату. Дальше ходит Работник. Он принимает зарплату и выбирает уровень усилий, который потратит на выполнение работы. Работник не может отказаться от предложенной ему зарплаты.

Рассмотрим игру, когда Работодатель предлагает два уровня зарплаты: высокий и низкий. Работник принимает предложенную зарплату. Затем он отвечает на неё высоким или низким уровнем усилий при выполнении работы.

Представим игру в развёрнутой форме. Для этого нам надо построить **дерево игры**. Оно отображает все возможные действия игроков и все исходы игры.

Дерево игры начинается в крайней левой точке, если оно ориентировано горизонтально. Если дерево ориентировано вертикально, то его начало — крайняя верхняя точка. Эта точка называется **начальным узлом** или корнем. В этом узле первый участник делает свой ход.

Каждый возможный вариант выбора первого участника изображается отрезками, исходящими из начального узла. Эти отрезки называются **ветвями**. Каждая ветвь соединяет два узла дерева. Эти узлы могут быть двух типов:

* **Узел действия** — в нём участник делает ход.
* **Концевой узел** — обозначает конкретный исход игры.

В концевом узле ни один из участников не может сделать ход.

Иллюстрация 1-1 демонстрирует дерево игры "дарообмен".

{caption: "Иллюстрация 1-1. Дерево игры дарообмен", height: "50%", width: "100%"}
[Дерево игры дарообмен](images/GameTheory/gift-exchange-game-tree.png)

 На иллюстрации вы видите семь узлов: a, b, c, d, e, f, g. Первые три узла действия a, b, c обозначают ходы игроков. В точке a Работодатель предлагает уровень зарплаты. Каждому возможному выбору участника в каждом узле соответствует ветвь дерева.
 
Если Работодатель предложил высокую зарплату, мы переходим в узел b. В нём Работник выбирает уровень усилий, которые он потратит на выполнение работы. Если Работодатель предложил низкую зарплату, то Работник выбирает уровень усилий в узле c.

Последние четыре узла d, e, f, g концевые. Они обозначают исходы игры. В них мы переходим после того, как Работник сделал свой выбор в узле b или c.

Каждому исходу игры соответствуют выигрыши участников. Они обозначаются парой цифр. Первая цифра выделена чёрным цветом. Это выигрыш Работодателя. Вторая цифра, выделенная серым, означает выигрыш Работника.

Рассмотрим выигрыши участников. Наилучший исход игры для Работодателя и Работника — это узел d. Он соответствует случаю, когда Работодатель предложил высокую зарплату и Работник качественно выполнил работу. В этом случае каждый игрок получил то, что хотел. Выигрыши обоих участников равны 2.

В концевом узле e Работодатель не получает желаемого. Он заплатил большую сумму, но Работник отработал небрежно. В этом случае выигрыш Работника максимальный и равен 3. Он получил большие деньги и потратил минимум усилий. Выигрыш Работодателя при таком исходе минимальный — 0.

В концевом узле f Работник получает минимальный выигрыш 0. В этом случае Работодатель заплатил небольшую сумму, а Работник выполнил заказ качественно. Из-за этого Работодатель получает максимальный выигрыш 3. Он потратил минимум денег за качественно сделанный заказ.

Концевой узел g соответствует случаю, когда оба Работодатель и Работник получают низкие выигрыши 1. Работодатель заплатил небольшую сумму. Получив её Работник отработал небрежно. В этом случае Работодатель не потратил много денег, а Работник сэкономил свои силы.

Найдём решение этой игры. Упростим ситуацию и предположим, что сделка между Работодателем и Работником происходит однократно. Это значит, что второй попытки договориться у них не будет. В этом случае Работнику нет смысла пытаться зарекомендовать себя с хорошей стороны.

Для анализа игры применим метод [**обратной индукции**](https://ru.wikipedia.org/wiki/Обратная_индукция). Он также известен как метод **обратных рассуждений**. Его впервые применили фон Нейман и Моргенштерн для анализа игр с нулевой суммой в книге "Теория игр и экономическое поведение".

Обратная индукция предлагает рассматривать ходы игроков в обратном порядке, начиная с последнего. Таким образом мы находим наилучший выбор участника, который ходит последним. Затем с учётом этого, ищем наилучший предпоследний ход. Повторяем анализ шагов до тех пор, пока не придём к первому ходу в партии.

Какой наилучший выбор может сделать Работник? Предположим, что Работодатель заплатил большую сумму. Тогда у Работника есть два выбора: выполнить работу хорошо или плохо. Первый выбор приведёт к исходу в узле d. Это неплохой вариант, потому что Работодатель и Работник получат выигрыш 2. Но исход в узле e лучше для Работника. В ней он получит выигрыш 3, потому что ему не пришлось сильно напрягаться. Значит в узле b Работнику выгоднее выбрать вариант мало усилий. Так он максимизирует свой выигрыш.

Теперь рассмотрим случай, когда Работодатель заплатил мало. Тогда Работник делает выбор в узле c. Если он решит работать добросовестно, это приведёт к исходу f. При этом исходе выигрыш работника минимален. Он заработал мало и потратил много усилий. Если же работник потратит мало усилий, результат будет лучше. Он заработает мало, но и не потратит своих сил. Следовательно лучший выбор Работника в узле c — приложить мало усилий.

Мы пришли к выводу, что Работнику выгодно приложить мало усилий, независимо от уровня зарплаты. Ещё раз заметим, что этот вывод справедлив для рационального игрока, который стремится максимизировать свой выигрыш в однократной игре. Правила игры разрешают ему поступить нечестно в узле b, выбрав мало усилий. При этом у Работодателя нет никакой возможности наказать Работника.

Проанализируем выбор Работодателя в узле a. Он тоже рациональный игрок, который стремится максимизировать свой выигрыш. Следовательно, он применит метод обратной индукции, чтобы спрогнозировать действия Работника. Работодатель придёт к тому же выводу, что и мы: Работнику выгодно отработать небрежно. В этом случае Работодателю нет никакого смысла платить много. Он получит некачественную работу, независимо от потраченной суммы. Тогда наилучшим выбором Работодателя будет низкая зарплата.

Концевой узел g является решением игры "дарообмен". Он соответствует наилучшим стратегиям Работодателя и Работника. Лучшие ходы каждого игрока обозначены стрелками на иллюстрации 1-1.

Если условия игры изменятся, то изменится и её решение. Например, игра может проводиться многократно. В этом случае Работодатель может предложить высокую зарплату в первой партии. Если на это Работник ответит малыми усилиями, Работодатель может "наказать" его в следующй партии. Вместо высокой зарплаты, он предложит низкую. Если Работник учтёт возможность такого наказания, он будет заинтересован всегда отвечать высокими усилиями на высокую зарплату. Это обеспечит ему наибольший выигрыш в концевом узле d в серии партий.

Если Работодатель в первой партии предложил небольшую зарплату, у Работника есть стимул приложить много усилий. Таким образом он хорошо себя зарекомендует. Работодатель может учесть это в следующей партии и предложить высокую зарплату. Если этого не произойдёт, Работник перейдёт на выбор мало усилий в следующих партиях. Работодатель не заинтересован в таком исходе, поскольку он даст меньший выигрыш. Если Работник в какой-то партии перейдет на низкие усилия, Работодатель в следующей партии перейдет на низкую зарплату. Когда обе стороны учитывают такую перемену, ни одна из них не будет менять свою стратегию.

Исход в узле d можно получить и в однократной игре. Для этого Работодатель и Работник должны заключить контракт. Контракт, имеющий юридическую силу, позволит Работодателю через суд потребовать от Работника компенсации за плохо выполненную работу. Это опять же случай, когда Работодатель может "наказать" Работника. В этом случае выигрыши изменятся. В концевом узле e Работник получит не 3, а меньше в зависимости от суммы штрафа. Тогда ему станет невыгодно отвечать плохой работой на высокую зарплату.

#### Игра "стоножка"

Рассмотрим более сложное дерево игры ["стоножка"](https://360wiki.ru/wiki/Centipede_game) или "Сороконожка". Эту игру разработал американский экономист Роберт Розенталь в 1981 году.

В игре "стоножка" участвуют два игрока. Они по очереди выбирают одно из двух действий: взять стопку монет на столе или передать ход. При передаче хода, стопка монет увеличивается. Если никто из участников не берёт стопку монет, игра заканчивается на десятом ходу. В этом случае никто не получает деньги.

Для примера назовём участников Алиса и Боб. Иллюстрация 1-2 демонстрирует дерево игры "стоножка".

{caption: "Иллюстрация 1-2. Дерево игры стоножка", height: "50%", width: "100%"}
[Дерево игры стоножка](images/GameTheory/centipede-game-tree.png)

Игра начинается с хода Алисы в узле a. Перед ней на столе лежит 10 монет. Алиса выбирает одно из действий: взять монеты или пропустить ход. Если Алиса берёт монеты, игра заканчивается в концевом узле b. Тогда выигрыш Алисы равен 10, а Боба — 0.

Если Алиса пропускает ход, число монет на столе удваивается. Теперь Боб в узле c делает ход. Он может взять 20 монет и получить выигрыш 20 в концевом узле d. Альтернативное решение — передать ход Алисе. Тогда она будет решать брать ли 30 монет в узле e.

Игра продолжается, пока на столе не накопится 100 монет. Последний ход делает Боб в узле x. Он выбирает или взять 100 монет, или пропустить ход. Если Боб пропускает ход, он и Алиса ничего не получают. Оба игрока знают, что игра заканчивается после хода Боба в узле x.

Применим метод обратной индукции, чтобы решить игру "стоножка". Начнём с последнего ход Боба в узле x. Очевидно, что его лучший выбор — взять 100 монет.

Перейдём к предпоследнему ходу Алисы. Она должна решить, брать ли ей 90 монет или пропустить ход. Алиса знает, что на последнем ходе в узле x Боб возьмёт монеты. Поэтому она должна сделать это раньше и взять 90 монет на предпоследнем ходе. Рассуждая аналогично, Боб решит взять 80 монет на предпредпоследнем ходе.

Продолжая это рассуждение до первого хода, мы приходим к выводу, что Алиса должна взять 10 монет в начальном узле a. В противном случае Боб возьмёт 20 монет на втором ходе.

"Стоножка" — один из случаев, когда экспериментальные данные не совпадают с решением теории игр. Игру неоднократно проводили среди студентов университетов. В этих экспериментах партия редко завершалась на первом ходе. Гораздо чаще участники пропускали несколько ходов и ждали увеличения суммы выигрыша. 

Есть несколько объяснений расхождению теории и практики. Одно из них указывает на неопытность игроков. Участник, который впервые начал играть в "стоножку", может просчитать только следующие пару ходов вперёд и остановиться на этом. Такой ограниченный расчёт приводит к тому, что участники склонны брать монеты ближе к последнему ходу.

Экономисты Игнасио Паласиос-Уэрта и Оскар Волий проводили игру "стоножка" среди профессиональных шахматистов в 2003 году. Результаты этого эксперимента оказались ближе к предсказанию теории. Большинство игроков предпочитало брать монеты на первом ходе. Возможно, причина в том, что шахматисты хорошо знакомы с методом обратной индукции ввиду своей профессии. Поэтому они просчитывали все ходы в игре перед тем, как сделать первый ход.

Другое объяснение говорит об ожидаемой иррациональности игроков. Когда первый участник пропускает ход в точке a, он даёт сигнал оппоненту, что готов повторить своё решение. Исходя из этого, второй игрок тоже пропускает свой ход в точке c. Таким образом игра продолжается, пока один из игроков не решит, что стопка монет стала достаточно большой.

Если у участников игры "стоножка" есть возможность договориться, её решение поменяется. В этом случае игра становится кооперативной. Оба участника ждут, пока сумма на столе не станет максимальной. Второй игрок забирает эту сумму на последнем ходе в точке x. Затем он делит выигрыш с первым игроком пополам.

### Нормальная форма игры

#### Игра "Дилемма заключённого"

В 1950 году американские математики Мерил Флад и Мелвин Дрешер сформулировали фундаментальную проблему теории игр. Она получила известность как ["дилемма заключённого"](https://ru.wikipedia.org/wiki/Дилемма_заключённого), благодаря канадскому математик Альберту Такеру.

Флад и Дрешер описали дилемму на языке математики. Такер сформулировал её в виде детективной истории. В таком виде проблема стала понятна нематематиков. Такер представил её на [семинаре для психологов](https://pr.princeton.edu/news/95/q1/0126tucker.html) в Принстонском университете. Так он продемонстрировал пример задачи, которые решает теория игр.

Вот как Такер сформулировал "дилемму заключённого":

*Два преступника А и Б были арестованы и заключены в тюрьму. Они находятся в разных камерах и не могут общаться друг с другом. У полиции нет достаточных доказательств, чтобы осудить преступников по основному делу. Есть только доказательства для менее серьезного обвинения. Полиция предлагает каждому заключённому либо дать показания против другого, либо не давать их. При этом результаты будут следующими:*

* *Если А и Б дают показания против друг друга, каждый из них получит два года тюрьмы.*

* *Если А даёт показания против Б, но Б хранит молчание, А будет освобождён, а Б получит три года тюрьмы.*

* *Если А молчит, а Б даёт показания против него, А получает три года тюрьмы, а Б будет освобождён.*

* *Если А и Б будут молчать, они оба получат по одному году тюрьмы.*

Это параллельная игра с одновременными ходами. Участники могут делать выбор друг за другом, но при этом они не знают о выборе друг друга. Поэтому каждый из них вынужден принимать решения, не зная о решении другого.

Пусть участников "дилеммы заключённого" зовут Чак и Мэллори. Для начала представим игру в развёрнутой форме. Иллюстрация 1-3 демонстрирует это представление.

{caption: "Иллюстрация 1-3. Дерево игры дилемма заключённого", height: "50%", width: "100%"}
[Дерево игры дилемма заключённого](images/GameTheory/prisoners-dilemma-tree.png)

В параллельной игре участники делают ходы одновременно. Однако, структура дерева игры предполагает очерёдность ходов. Выберем любого из участников, который делает выбор в начальном узле a. Пусть это будет Чак.

Чак выбирает одно из двух действий: молчать или дать показания против Мэллори. После выбора Чака, наступает ход Мэллори в узлах b или c. Мэллори должен сделать свой ход, не зная в каком узле он находится. Эта нехватка информации возникает из-за стратегической неопределённости.

Чтобы отобразить стратегическую неопределённость на дереве игры, соединим узлы b и c пунктирной линией. Соединённые таким образом узлы называются **информационным множеством**. Игрок, делающий ход в одном из узлов информационного множества, не знает, что это за узел. Поэтому выбор игрока в пределах одного информационного множества означает один и тот же ход для всех узлов этого множества.

Итак Мэллори делает свой ход. Он должен выбрать одно из двух действий: молчать или дать показания против Чака. Это действие будет выполнено в обоих узлах b и c. Исход игры зависит от выбора Чака в узле a и выбора Мэллори в информационном множестве узлов b и c.

Применим метод обратной индукции, чтобы решить "дилемму заключённых". Начнём с последнего хода Мэллори в узлах b и c. Мэллори знает выигрыши при каждом возможном исходе игры. Если он выберет молчать, в лучшем случае он получит 1 год тюрьмы. Для этого Чак тоже должен молчать. Однако, Мэллори не знает, что на самом деле выбрал Чак. Если Чак дал показания, то выбор молчать означает для Мэллори 3 года тюрьмы.

Альтернативный выбор Мэллори — дать показания. Тогда если Чак промолчал, Мэллори может вообще избежать наказания. Если же Чак дал показания, то Мэллори получит 2 года тюрьмы. Этот вариант лучше чем 3 года. Получается, что дать показания — это лучший ответ Мэллори на любое действие Чака.

Перейдём в начальный узел a дерева игры. Чак применит метод обратной индукции и вычислит наилучший выбор Мэллори. Этот выбор — дать показания. Следовательно, Чак должен выбрать между молчать и получить 3 года тюрьмы или дать показания и получить 2 года. Его наилучший выбор — тоже дать показания.

Решением "дилеммы заключённых" будет концевой узел g с выигрышами участников -2 и -2.

Деревья игр "дилемма заключённого" и "дарообмен" похожи. Если вы добавите число 3 ко всем выигрышам на иллюстрации 1-3, вы получите выигрыши, как на иллюстрации 1-1. Мы применили метод обратной индукции к обоим играм и получили одинаковое решение. Это означает, что "дарообмен" представляет собой последовательную версию игры "дилемма заключённого".

В случае игр "дилемма заключённого" и "дарообмен" решение не поменялось при смене типа игры с последовательного на параллельный. Однако, так происходит не всегда. В некоторых случаях в последовательной версии игры преимущество получает участник, делающий первый ход. В других случаях преимущество у игрока на втором ходе.

Теперь представим игру "дилемма заключённого" в нормальной форме. Для этого построим таблицу. Её строки соответствуют стратегиям Чака, а столбцы — стратегиям Мэллори. В каждой ячейки таблицы указываются выигрыши обоих участников, если они выберут стратегии из соответствующих строки и столбца. Первое число в каждой ячейке означает выигрыш Чака, а второе — выигрыш Мэллори.

Таблица 1-4 демонстрирует нормальную форму игры "дилемма заключённого".

{caption: "Таблица 1-4. Нормальная форма игры дилемма заключённого", width: "100%"}
[Нормальная форма игры дилемма заключённого](images/GameTheory/prisoners-dilemma-table.png)


-----

Дача показания обоими участниками является равновесием Нэша в этой игре. В этом случае каждый участник получает два годам тюрьмы. Парадокс дилеммы заключается в том, что рациональные действия каждого участника приводят к нерациональному решению. Лучшим решением в этой игре было бы молчать для обоих участников. Тогда каждый из них получил бы по одному году тюрьмы.

#### Координационные игры

### Комбинация последовательных и параллельных игр

### Смешанные стратегии