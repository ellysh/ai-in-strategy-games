## 3.1 Теория игр и шахматы

### 3.1.1 Классификация игры

Для начала определим, к какому классу стратегических игр относятся [шахматы](https://ru.wikipedia.org/wiki/Шахматы). Для этого обратимся к таблице 1-1 и пройдём по каждому признаку.

Первый признак — это порядок ходов. В шахматах участники ходят по очереди друг за другом. Поэтому шахматы — это последовательная игра.

Выигрыш одного игрока означает поражение другого. По правилам шахматных турниров выигравший партию игрок получает одно очко, а проигравший — ноль. В партии возможна ничья. При этом игроки делят выигрыш пополам: каждый получает по 0.5 очков. Из этих правил следует, что шахматы — это игра с нулевой суммой.

В шахматах правила игры являются общим знанием. Каждый участник знает правила игры, выигрыши при возможных исходах и функции полезности. Игроки в некоторой степени знают стратегии друг друга потому, что могут просчитать несколько ходов наперёд. Таким образом шахматы — это игра с полной информацией.

Во время шахматной партии участники могут записывать или запоминать все выполненные ходы. Это устраняет стратегическую неопределённость. Следовательно, шахматы относятся к играм с совершенной информацией.

В шахматах нет элемента случайности. Никакое случайное событие не может повлиять на исход партии. Когда нет внешней неопределённости, игроки могут просчитывать будущие ходы. Поэтому шахматы относятся к детерминированным играм.

Во время турнира одни и те же игроки часто играют друг с другом несколько раз. При этом во время партии каждый из них делает несколько ходов. Поэтому шахматы — это многократная и многоходовая игра.

Правила игры фиксированные. На турнирах каждому игроку отводится определённое время на все ходы. Количество времени зависит от типа турнира. Чаще всего применяют следующие правила:

* **Классический**. На первые 40 ходов каждому игроку отводится 90 минут. После 40-ого хода каждому игроку добавляется 30 минут. К этим 30 минутам добавляется по 30 секунд за каждый ход, сделанный с начала партии.

* **Рапид** (rapid). Каждому игроку отводится от 10 до 60 минут на все ходы.

* **Блиц** (blitz). Игрокам отводится от 3 до 10 минут на ходы.

* **Буллит** (bullet). Игроки имеют менее 3-х минут на ходы.

* **Армагеддон** (armageddon). Игрок за чёрные фигуры выигрывает в случае ничьей. Ему отводится на 1 минуту меньше времени, чем игроку за белые фигуры. Обычно, белые имеют 6 или 5 минут на все ходы. Соответственно чёрные имеют 5 или 4 минуты.

Шахматы — это игра с нулевой суммой для двух участников. Поэтому игроки не могут договориться о совместных действиях. Это означает, что игра некооперативная. Единственный вид договорённости в шахматах: когда один из участников предлагает ничью, а другой на неё соглашается.

Во время партии каждый игрок имеет право ходить только своими фигурами. Поэтому шахматы относятся к пристрастным играм.

Шахматная доска имеет 64 клетки. В начале игры каждый участник имеет по 16 фигур. В течении партии число фигур на доске уменьшается. Это значит, что число возможных позиций фигур на доске конечно. Из этого следует, что число стратегий у каждого игрока тоже конечное. Таким образом шахматы — это дискретная игра.

Подведём итог. С точки зрения теории игр шахматы — это игра:

* Последовательная
* С нулевой суммой
* С полной информацией
* С совершенной информацией
* Детерминированная
* Многократная и многоходовая
* С фиксированными правилами
* Некооперативная
* Пристрастная
* Дискретная

### 3.1.2 Решение игры

Посмотрим, что говорит теория игр о решении шахмат. Сможет ли теория ответить на вопрос: какая стратегия для игроков наилучшая? Мы уже знаем, что последовательную игру удобнее представлять в развёрнутой форме. Для этого надо построить дерево игры. Сделать это в теории возможно, поскольку в шахматной партии конечное число ходов. Далее применив метод обратной индукции, можно найти решение игры.

Исходная позиция фигур на доске будет начальным узлом дерева. Эту позицию демонстрирует иллюстрация 3-1.

{caption: "Иллюстрация 3-1. Начальная позиция фигур на шахматной доске", height: "30%"}
![Начальная позиция](images/Chess/chess-initial-position.png)

Первым ходит игрок с белыми фигурами. У него есть 20 возможных ходов из начальной позиции. Каждая из восьми пешек может перейти вперед на одну или две клетки. Это даст 16 ходов. Каждый из двух коней может пойти буквой Г направо или налево. Это ещё 4 потенциальных хода. В сумме получается 20. Поэтому из начального узла дерева игры исходит 20 ветвей.

Каждая из 20 ветвей заканчивается узлом действия. В этом узле ходит игрок с чёрными фигурами. У него есть 20 первых ходов, которые аналогичны белым: пешками и конями. Следовательно, из каждого узла действия исходит ещё 20 ветвей.

После двух ходов игроков мы получили 400 узлов действия. На третьем ходу у белых есть 26 возможных ходов. На каждый из них чёрные отвечают своими 26-ю ходами. Это значит, что к четвёртом ходу дерево решений имеет в сумме 270400 узлов действия.

Число узлов в дереве решений с каждым ходом стремительно растёт. Каким же будет его размер к концу партии? Этим вопросом заинтересовался американский математик [Клод Шеннон](https://ru.wikipedia.org/wiki/Шеннон,_Клод). В 1950 году он [оценил](https://ru.wikipedia.org/wiki/Число_Шеннона) сложность игры в шахматы. Согласно его расчётам, число возможных позиций фигур на шахматной доске примерно равно 10^44^. Это позиции, которые допустимы с точки зрения правил игры. При этом [**сложность дерева игры**](https://en.wikipedia.org/wiki/Game_complexity#Game-tree_complexity) составляет примерно 10^120^. Эта сложность означает суммарное число узлов в дереве игры от начала до конца обычной партии.

Из-за огромного размера дерева игры в шахматы его нельзя построить и проанализировать на практике. Не существует компьютера с достаточной памятью, чтобы сохранить все узлы дерева. Кроме того чтобы пройти по этим узлам, самому мощному современному компьютеру понадобится около 10^100^ лет.

Мы пришли к такому выводу: инструменты теории игр могут решить шахматы. Однако, для этого у нас недостаточно ресурсов.

Оптимальная стратегия в шахматах никому неизвестна. Но это не мешает профессиональным игрокам находить лучшие ходы и выигрывать партии. Как им это удаётся?
